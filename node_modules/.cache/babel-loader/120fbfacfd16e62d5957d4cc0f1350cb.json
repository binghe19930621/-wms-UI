{"remainingRequest":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\user\\content\\AuthManagerContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\user\\content\\AuthManagerContent.vue","mtime":1585370815991},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Api from \"@/assets/api/Api\";\nimport CollectionUtil from \"@/util/CollectionUtil\";\nimport ElButtonMini from \"@/components/common/button/ElButtonMini\";\nimport DebThrUtil from \"@/util/DebThrUtil\";\nimport ElButtonCurdGroup from \"@/components/common/button/ElButtonCurdGroup\";\nimport AuthAddDialog from \"@/components/page-content/user/dialog/AuthAddDialog\";\nimport DialogUtil from \"@/util/DialogUtil\";\nexport default {\n  name: \"AuthManagerContent\",\n  components: {\n    AuthAddDialog: AuthAddDialog,\n    ElButtonCurdGroup: ElButtonCurdGroup,\n    ElButtonMini: ElButtonMini\n  },\n  props: {\n    isSelect: {\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      showAddDialog: false,\n      data: [],\n      defaultProps: {\n        children: 'children',\n        label: 'name'\n      },\n      form: {\n        name: ''\n      },\n      selectedNodes: [],\n      editId: 0,\n      editPid: 0\n    };\n  },\n  mounted: function mounted() {\n    this.reload();\n  },\n  methods: {\n    reload: function reload() {\n      this.refreshData();\n    },\n    refreshData: function refreshData() {\n      var _this = this;\n\n      this.$ajax.request(Api.role_auth.authAll, this.form).then(function (resp) {\n        _this.data = resp;\n      });\n    },\n    checkChange: function checkChange() {\n      var _this2 = this;\n\n      DebThrUtil.debounce('checkChange' + this.uid, function () {\n        _this2.selectedNodes = _this2.$refs.tree.getCheckedNodes();\n\n        _this2.$emit('check-change', _this2.selectedNodes);\n      });\n    },\n    clickAddButton: function clickAddButton() {\n      this.editId = 0;\n      this.showAddDialog = true;\n    },\n    clickEditButton: function clickEditButton() {\n      this.editId = this.selectedNodes[0].id;\n      this.showAddDialog = true;\n    },\n    clickDeleteButton: function clickDeleteButton() {\n      this.delete(this.selectedNodes);\n    },\n    clickRowDeleteButton: function clickRowDeleteButton(row) {\n      this.delete([row]);\n    },\n    clickRowAddButton: function clickRowAddButton(row) {\n      this.editPid = row.id;\n      this.showAddDialog = true;\n    },\n    clickRowEditButton: function clickRowEditButton(row) {\n      this.editId = row.id;\n      this.showAddDialog = true;\n    },\n    delete: function _delete(nodes) {\n      var _this3 = this;\n\n      DialogUtil.confirm(\"\\n                \\u786E\\u5B9A\\u8981\\u5220\\u9664\\u4EE5\\u4E0B\\u6743\\u9650\\u5417\\uFF1F <br>\\n                [ \".concat(nodes.map(function (x) {\n        return x.name;\n      }), \" ]\\n            \")).then(function () {\n        return _this3.$ajax.request(Api.role_auth.authDelete, {\n          ids: nodes.map(function (x) {\n            return x.id;\n          }).join(',')\n        });\n      }).then(function (resp) {\n        DialogUtil.toastSuccess(resp);\n\n        _this3.refreshData();\n      });\n    },\n    addDialogFinish: function addDialogFinish() {\n      this.refreshData();\n      this.editPid = 0;\n      this.editId = 0;\n    },\n    setCheckedKeys: function setCheckedKeys(ids) {\n      this.$refs.tree.setCheckedKeys(ids);\n    }\n  },\n  watch: {},\n  computed: {\n    dataTree: function dataTree() {\n      return CollectionUtil.listToTree(this.data);\n    }\n  }\n};",{"version":3,"sources":["AuthManagerContent.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"AuthManagerContent overflow-h\">\r\n        <div class=\"\" v-if=\"!isSelect\">\r\n            <el-button-curd-group\r\n                    :edit-disabled=\"selectedNodes.length !== 1\"\r\n                    :delete-disabled=\"selectedNodes.length < 1\"\r\n                    @click-add=\"clickAddButton\"\r\n                    @click-edit=\"clickEditButton\"\r\n                    @click-delete=\"clickDeleteButton\"\r\n            ></el-button-curd-group>\r\n        </div>\r\n        <div class=\"mt-xs\" style=\"max-height: 400px;overflow-y:auto;\">\r\n            <el-tree\r\n                    :data=\"dataTree\"\r\n                    show-checkbox\r\n                    default-expand-all\r\n                    :expand-on-click-node=\"false\"\r\n                    node-key=\"id\"\r\n                    ref=\"tree\"\r\n                    highlight-current\r\n                    :props=\"defaultProps\"\r\n                    @check-change=\"checkChange\"\r\n            >\r\n                <div class=\"flex-box flex-center fz-xs w100p\" slot-scope=\"{ node, data }\">\r\n                    <div class=\"flex-grow\">{{ node.label }}</div>\r\n                    <div v-if=\"!isSelect\">\r\n                        <el-button-mini type=\"text\" icon=\"add\" v-if=\"data.pid === 0\"\r\n                                        @click.native=\"clickRowAddButton(data)\"></el-button-mini>\r\n                        <el-button-mini type=\"text\" icon=\"edit\"\r\n                                        @click.native=\"clickRowEditButton(data)\"></el-button-mini>\r\n                        <el-button-mini type=\"text\" icon=\"delete\"\r\n                                        @click.native=\"clickRowDeleteButton(data)\"></el-button-mini>\r\n                    </div>\r\n                </div>\r\n            </el-tree>\r\n        </div>\r\n        <auth-add-dialog\r\n                :visible.sync=\"showAddDialog\"\r\n                :edit-id=\"editId\"\r\n                :edit-pid=\"editPid\"\r\n                @finish=\"addDialogFinish\"\r\n        ></auth-add-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Api from \"@/assets/api/Api\";\r\n    import CollectionUtil from \"@/util/CollectionUtil\";\r\n    import ElButtonMini from \"@/components/common/button/ElButtonMini\";\r\n    import DebThrUtil from \"@/util/DebThrUtil\";\r\n    import ElButtonCurdGroup from \"@/components/common/button/ElButtonCurdGroup\";\r\n    import AuthAddDialog from \"@/components/page-content/user/dialog/AuthAddDialog\";\r\n    import DialogUtil from \"@/util/DialogUtil\";\r\n\r\n    export default {\r\n        name: \"AuthManagerContent\",\r\n        components: {AuthAddDialog, ElButtonCurdGroup, ElButtonMini},\r\n        props: {\r\n            isSelect: {\r\n                default: false,\r\n            },\r\n        },\r\n        data() {\r\n            return {\r\n                showAddDialog: false,\r\n                data: [],\r\n                defaultProps: {\r\n                    children: 'children',\r\n                    label: 'name',\r\n                },\r\n                form: {\r\n                    name: ''\r\n                },\r\n                selectedNodes: [],\r\n                editId: 0,\r\n                editPid: 0,\r\n            }\r\n        },\r\n        mounted() {\r\n            this.reload();\r\n        },\r\n        methods: {\r\n            reload() {\r\n                this.refreshData();\r\n            },\r\n            refreshData() {\r\n                this.$ajax.request(Api.role_auth.authAll, this.form)\r\n                    .then(resp => {\r\n                        this.data = resp;\r\n                    });\r\n            },\r\n            checkChange() {\r\n                DebThrUtil.debounce('checkChange' + this.uid, () => {\r\n                    this.selectedNodes = this.$refs.tree.getCheckedNodes();\r\n                    this.$emit('check-change', this.selectedNodes);\r\n                });\r\n            },\r\n            clickAddButton() {\r\n                this.editId = 0;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickEditButton() {\r\n                this.editId = this.selectedNodes[0].id;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickDeleteButton() {\r\n                this.delete(this.selectedNodes);\r\n            },\r\n            clickRowDeleteButton(row) {\r\n                this.delete([row]);\r\n            },\r\n            clickRowAddButton(row) {\r\n                this.editPid = row.id;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickRowEditButton(row) {\r\n                this.editId = row.id;\r\n                this.showAddDialog = true;\r\n            },\r\n            delete(nodes) {\r\n                DialogUtil.confirm(`\r\n                    确定要删除以下权限吗？ <br>\r\n                    [ ${nodes.map(x => x.name)} ]\r\n                `).then(() => {\r\n                    return this.$ajax.request(Api.role_auth.authDelete, {\r\n                        ids: nodes.map(x => x.id).join(',')\r\n                    })\r\n                }).then(resp => {\r\n                    DialogUtil.toastSuccess(resp);\r\n                    this.refreshData();\r\n                })\r\n            },\r\n            addDialogFinish() {\r\n                this.refreshData();\r\n                this.editPid = 0;\r\n                this.editId = 0;\r\n            },\r\n            setCheckedKeys(ids) {\r\n                this.$refs.tree.setCheckedKeys(ids);\r\n            }\r\n\r\n        },\r\n        watch: {},\r\n        computed: {\r\n            dataTree() {\r\n                return CollectionUtil.listToTree(this.data);\r\n            }\r\n        },\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import (reference) \"~style/all.less\";\r\n\r\n    .AuthManagerContent {\r\n    }\r\n</style>"],"sourceRoot":"src/components/page-content/user/content"}]}