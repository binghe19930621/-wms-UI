{"remainingRequest":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\项目\\SKWMS\\wms-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\项目\\SKWMS\\wms-ui\\src\\util\\LoadingUtil.js","dependencies":[{"path":"E:\\项目\\SKWMS\\wms-ui\\src\\util\\LoadingUtil.js","mtime":1585370816114},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["/**\r\n * 加载中\r\n */\nimport { Message } from \"element-ui\";\nimport DialogUtil from \"@/util/DialogUtil\";\nexport default {\n  /**\r\n   * message 实例\r\n   * 默认动画CSS : el-icon-loading\r\n   */\n  _messageInstance: null,\n\n  /**\r\n   * 当前ajax 请求数量\r\n   */\n  _ajaxCount: 0,\n\n  /**\r\n   * Ajax 加载中提示延迟出现时间\r\n   */\n  _ajaxDelay: 500,\n\n  /**\r\n   * Ajax 超时时间\r\n   */\n  _ajaxExpireDelay: 10000,\n\n  /**\r\n   * Ajax 延时计时器\r\n   */\n  _ajaxDelayTimeout: null,\n\n  /**\r\n   * Ajax 超时计时器\r\n   */\n  _ajaxExpireTimeout: null,\n\n  /**\r\n   * Ajax显示状态\r\n   * 当启动一个 ajax 之后立刻调用次函数\r\n   * 延迟一段时间没有返回后显示加载中动画\r\n   */\n  ajaxStart: function ajaxStart() {\n    this._ajaxTimeoutClear();\n\n    this._ajaxDelayTimeout = setTimeout(this.start, this._ajaxDelay);\n    this._ajaxExpireDelay = setTimeout(this._ajaxError, this._ajaxExpireDelay);\n  },\n\n  /**\r\n   * ajax 超时错误提示\r\n   */\n  _ajaxError: function _ajaxError() {\n    this.close();\n    DialogUtil.toastError('加载数据超时，请稍候重试！');\n  },\n\n  /**\r\n   * 清除 ajax 定时器\r\n   * @private\r\n   */\n  _ajaxTimeoutClear: function _ajaxTimeoutClear() {\n    clearTimeout(this._ajaxDelayTimeout);\n    clearTimeout(this._ajaxExpireTimeout);\n  },\n\n  /**\r\n   * ajax 成功完成\r\n   * 当ajax 请求返回后执行该函数以关闭加载中提示\r\n   */\n  ajaxSuccessFinish: function ajaxSuccessFinish() {\n    if (--this._ajaxCount <= 0) {\n      this._ajaxTimeoutClear();\n\n      this.close();\n    }\n  },\n\n  /**\r\n   * 开始加载中动画\r\n   * 加载中动画不会自动关闭\r\n   * 需 执行 close() 函数关闭动画\r\n   * @param message  加载中附加文字\r\n   * @returns {ElMessageComponent}    message 实例\r\n   */\n  start: function start() {\n    var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '正在拼命加载中...';\n    this.close();\n    return this._messageInstance = Message({\n      message: message,\n      type: 'info',\n      duration: 0,\n      iconClass: 'el-icon-loading mr-sm disp-ib'\n    });\n  },\n\n  /**\r\n   * 关闭加载中动画\r\n   */\n  close: function close() {\n    if (this._messageInstance) {\n      this._messageInstance.close();\n    }\n  }\n};",{"version":3,"sources":["E:\\项目\\SKWMS\\wms-ui\\src\\util\\LoadingUtil.js"],"names":["Message","DialogUtil","_messageInstance","_ajaxCount","_ajaxDelay","_ajaxExpireDelay","_ajaxDelayTimeout","_ajaxExpireTimeout","ajaxStart","_ajaxTimeoutClear","setTimeout","start","_ajaxError","close","toastError","clearTimeout","ajaxSuccessFinish","message","type","duration","iconClass"],"mappings":"AAAA;;;AAGA,SAAQA,OAAR,QAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AAEA,eAAe;AAEX;;;;AAIAC,EAAAA,gBAAgB,EAAE,IANP;;AAOX;;;AAGAC,EAAAA,UAAU,EAAE,CAVD;;AAWX;;;AAGAC,EAAAA,UAAU,EAAE,GAdD;;AAeX;;;AAGAC,EAAAA,gBAAgB,EAAE,KAlBP;;AAmBX;;;AAGAC,EAAAA,iBAAiB,EAAE,IAtBR;;AAuBX;;;AAGAC,EAAAA,kBAAkB,EAAE,IA1BT;;AA4BX;;;;;AAKAC,EAAAA,SAjCW,uBAiCC;AACR,SAAKC,iBAAL;;AACA,SAAKH,iBAAL,GAAyBI,UAAU,CAAC,KAAKC,KAAN,EAAa,KAAKP,UAAlB,CAAnC;AACA,SAAKC,gBAAL,GAAwBK,UAAU,CAAC,KAAKE,UAAN,EAAkB,KAAKP,gBAAvB,CAAlC;AACH,GArCU;;AAuCX;;;AAGAO,EAAAA,UA1CW,wBA0CE;AACT,SAAKC,KAAL;AACAZ,IAAAA,UAAU,CAACa,UAAX,CAAsB,eAAtB;AACH,GA7CU;;AA+CX;;;;AAIAL,EAAAA,iBAnDW,+BAmDS;AAChBM,IAAAA,YAAY,CAAC,KAAKT,iBAAN,CAAZ;AACAS,IAAAA,YAAY,CAAC,KAAKR,kBAAN,CAAZ;AACH,GAtDU;;AAwDX;;;;AAIAS,EAAAA,iBA5DW,+BA4DS;AAChB,QAAI,EAAE,KAAKb,UAAP,IAAqB,CAAzB,EAA4B;AACxB,WAAKM,iBAAL;;AACA,WAAKI,KAAL;AACH;AACJ,GAjEU;;AAoEX;;;;;;;AAOAF,EAAAA,KA3EW,mBA2EmB;AAAA,QAAxBM,OAAwB,uEAAd,YAAc;AAC1B,SAAKJ,KAAL;AACA,WAAO,KAAKX,gBAAL,GAAwBF,OAAO,CAAC;AACnCiB,MAAAA,OAAO,EAAEA,OAD0B;AAEnCC,MAAAA,IAAI,EAAE,MAF6B;AAGnCC,MAAAA,QAAQ,EAAE,CAHyB;AAInCC,MAAAA,SAAS,EAAE;AAJwB,KAAD,CAAtC;AAMH,GAnFU;;AAqFX;;;AAGAP,EAAAA,KAxFW,mBAwFH;AACJ,QAAI,KAAKX,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsBW,KAAtB;AACH;AACJ;AA5FU,CAAf","sourcesContent":["/**\r\n * 加载中\r\n */\r\nimport {Message} from \"element-ui\";\r\nimport DialogUtil from \"@/util/DialogUtil\";\r\n\r\nexport default {\r\n\r\n    /**\r\n     * message 实例\r\n     * 默认动画CSS : el-icon-loading\r\n     */\r\n    _messageInstance: null,\r\n    /**\r\n     * 当前ajax 请求数量\r\n     */\r\n    _ajaxCount: 0,\r\n    /**\r\n     * Ajax 加载中提示延迟出现时间\r\n     */\r\n    _ajaxDelay: 500,\r\n    /**\r\n     * Ajax 超时时间\r\n     */\r\n    _ajaxExpireDelay: 10000,\r\n    /**\r\n     * Ajax 延时计时器\r\n     */\r\n    _ajaxDelayTimeout: null,\r\n    /**\r\n     * Ajax 超时计时器\r\n     */\r\n    _ajaxExpireTimeout: null,\r\n\r\n    /**\r\n     * Ajax显示状态\r\n     * 当启动一个 ajax 之后立刻调用次函数\r\n     * 延迟一段时间没有返回后显示加载中动画\r\n     */\r\n    ajaxStart() {\r\n        this._ajaxTimeoutClear();\r\n        this._ajaxDelayTimeout = setTimeout(this.start, this._ajaxDelay);\r\n        this._ajaxExpireDelay = setTimeout(this._ajaxError, this._ajaxExpireDelay);\r\n    },\r\n\r\n    /**\r\n     * ajax 超时错误提示\r\n     */\r\n    _ajaxError() {\r\n        this.close();\r\n        DialogUtil.toastError('加载数据超时，请稍候重试！');\r\n    },\r\n\r\n    /**\r\n     * 清除 ajax 定时器\r\n     * @private\r\n     */\r\n    _ajaxTimeoutClear() {\r\n        clearTimeout(this._ajaxDelayTimeout);\r\n        clearTimeout(this._ajaxExpireTimeout);\r\n    },\r\n\r\n    /**\r\n     * ajax 成功完成\r\n     * 当ajax 请求返回后执行该函数以关闭加载中提示\r\n     */\r\n    ajaxSuccessFinish() {\r\n        if (--this._ajaxCount <= 0) {\r\n            this._ajaxTimeoutClear();\r\n            this.close();\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * 开始加载中动画\r\n     * 加载中动画不会自动关闭\r\n     * 需 执行 close() 函数关闭动画\r\n     * @param message  加载中附加文字\r\n     * @returns {ElMessageComponent}    message 实例\r\n     */\r\n    start(message = '正在拼命加载中...') {\r\n        this.close();\r\n        return this._messageInstance = Message({\r\n            message: message,\r\n            type: 'info',\r\n            duration: 0,\r\n            iconClass: 'el-icon-loading mr-sm disp-ib'\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 关闭加载中动画\r\n     */\r\n    close() {\r\n        if (this._messageInstance) {\r\n            this._messageInstance.close();\r\n        }\r\n    }\r\n\r\n}"]}]}