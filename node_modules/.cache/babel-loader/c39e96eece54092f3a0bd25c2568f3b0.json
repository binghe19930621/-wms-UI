{"remainingRequest":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\stock-trans\\StockTransManagerView.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\stock-trans\\StockTransManagerView.vue","mtime":1585370815977},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _Object$assign from \"E:\\\\\\u9879\\u76EE\\\\SKWMS\\\\wms-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\nimport _objectSpread from \"E:\\\\\\u9879\\u76EE\\\\SKWMS\\\\wms-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DialogUtil from \"@/util/DialogUtil\";\nimport PaginateModel from \"@/project/model/PaginateModel\";\nimport Api from \"@/assets/api/Api\";\nimport EcUtil from \"@/util/EcUtil\";\nimport SearchCardLayout from \"@/components/layout-component/SearchCardLayout\";\nimport ElButtonMini from \"@/components/common/button/ElButtonMini\";\nimport TablePanel from \"@/components/layout-component/TablePanel\";\nimport ElButtonCurdGroup from \"@/components/common/button/ElButtonCurdGroup\";\nimport DateTimeRangeInput from \"@/components/common/input/DateTimeRangeInput\";\nimport CategorySelector from \"@/components/page-content/enum-selector/CategorySelector\";\nimport StockEntryAddDialog from \"@/components/page-content/stock-entry/dialog/StockEntryAddDialog\";\nimport MoveListDialog from \"@/components/page-content/stock-entry/dialog/MoveListDialog\";\nimport MoveAddDialog from \"@/components/page-content/stock-entry/dialog/MoveAddDialog\";\nimport ApproveSelector from \"@/components/page-content/enum-selector/ApproveSelector\";\nimport ApproveEnum from \"@/project/enum/ApproveEnum\";\nimport ApproveTags from \"@/components/page-content/enum-selector/ApproveTags\";\nimport StockEntryPreviewDialog from \"@/components/page-content/stock-entry/dialog/StockEntryPreviewDialog\";\nimport StockEntryRejectDialog from \"@/components/page-content/stock-entry/dialog/StockEntryRejectDialog\";\nimport StockEntryDeliveryFinishDialog from \"@/components/page-content/stock-entry/dialog/StockEntryDeliveryFinishDialog\";\nimport StockTransModel from \"@/project/model/StockTransModel\";\nimport TransMoveAddDialog from \"@/components/page-content/stock-trans/dialog/TransMoveAddDialog\";\nimport TransMoveListDialog from \"@/components/page-content/stock-trans/dialog/TransMoveListDialog\";\nimport StockTransAddDialog from \"@/components/page-content/stock-trans/dialog/StockTransAddDialog\";\nimport StockTransRejectDialog from \"@/components/page-content/stock-trans/dialog/StockTransRejectDialog\";\nimport StockTransPreviewDialog from \"@/components/page-content/stock-trans/dialog/StockTransPreviewDialog\";\nexport default {\n  name: \"StockTransManagerView\",\n  components: {\n    StockTransPreviewDialog: StockTransPreviewDialog,\n    StockTransRejectDialog: StockTransRejectDialog,\n    StockTransAddDialog: StockTransAddDialog,\n    TransMoveListDialog: TransMoveListDialog,\n    TransMoveAddDialog: TransMoveAddDialog,\n    StockEntryDeliveryFinishDialog: StockEntryDeliveryFinishDialog,\n    StockEntryRejectDialog: StockEntryRejectDialog,\n    StockEntryPreviewDialog: StockEntryPreviewDialog,\n    ApproveTags: ApproveTags,\n    ApproveSelector: ApproveSelector,\n    MoveAddDialog: MoveAddDialog,\n    MoveListDialog: MoveListDialog,\n    StockEntryAddDialog: StockEntryAddDialog,\n    CategorySelector: CategorySelector,\n    DateTimeRangeInput: DateTimeRangeInput,\n    ElButtonCurdGroup: ElButtonCurdGroup,\n    TablePanel: TablePanel,\n    ElButtonMini: ElButtonMini,\n    SearchCardLayout: SearchCardLayout\n  },\n  props: {\n    // 出入库 1:入库；2：出库\n    type: {\n      default: 1\n    }\n  },\n  data: function data() {\n    return {\n      loading: false,\n      showAddDialog: false,\n      showMoveListDialog: false,\n      showMoveAddDialog: false,\n      showPreviewDialog: false,\n      showRejectDialog: false,\n      showDeliveryFinishDialog: false,\n      filterForm: new StockTransModel(),\n      data: [],\n      paginate: new PaginateModel(this.refreshData),\n      selectedRow: [],\n      sortingColumn: null,\n      editId: 0,\n      selectStockTrans: new StockTransModel(),\n      statusEnum: ApproveEnum\n    };\n  },\n  mounted: function mounted() {\n    this.reload();\n  },\n  methods: {\n    reload: function reload() {\n      this.refreshData();\n    },\n    refreshData: function refreshData() {\n      var _this = this;\n\n      this.loading = true;\n      this.$ajax.request(Api.stockTrans.list, _objectSpread({}, EcUtil.getSortField(this.sortingColumn), this.paginate.getJSON(), this.filterForm)).then(function (resp) {\n        _this.data = resp.list;\n\n        _this.paginate.setPaginate(resp);\n      }).finally(function () {\n        return _this.loading = false;\n      });\n    },\n    sortChange: function sortChange(nodes) {\n      this.sortingColumn = nodes;\n      this.refreshData();\n    },\n    clickAddButton: function clickAddButton() {\n      this.editId = 0;\n      this.selectStockTrans = this.selectedRow[0];\n      this.showAddDialog = true;\n    },\n    clickEditButton: function clickEditButton() {\n      this.editId = this.selectedRow[0].id;\n      this.showAddDialog = true;\n    },\n    clickDeleteButton: function clickDeleteButton() {\n      this.delete(this.selectedRow);\n    },\n    clickRowEditButton: function clickRowEditButton(row) {\n      this.editId = row.id;\n      this.showAddDialog = true;\n    },\n    clickRowDeleteButton: function clickRowDeleteButton(row) {\n      this.delete([row]);\n    },\n    clickRowDetailButton: function clickRowDetailButton(row) {\n      this.selectStockTrans = row;\n      this.showMoveListDialog = true;\n    },\n    clickRowPreviewButton: function clickRowPreviewButton(row) {\n      this.editId = row.id;\n      this.showPreviewDialog = true;\n    },\n    clickRowAddMoveButton: function clickRowAddMoveButton(row) {\n      this.editId = 0;\n      this.selectStockTrans = row;\n      this.showMoveAddDialog = true;\n    },\n    delete: function _delete(nodes) {\n      var _this2 = this;\n\n      DialogUtil.confirm(\"\\n                \\u786E\\u5B9A\\u5220\\u9664\\u4EE5\\u4E0B\\u79FB\\u4F4D\\u5355\\u5417\\uFF1F <br>\\n                [ \".concat(nodes.map(function (x) {\n        return x.number;\n      }).join(','), \" ]\\n            \")).then(function () {\n        return _this2.$ajax.request(Api.stockTrans.delete, {\n          ids: nodes.map(function (x) {\n            return x.id;\n          }).join(',')\n        });\n      }).then(function (resp) {\n        DialogUtil.toastSuccess(resp);\n\n        _this2.refreshData();\n      });\n    },\n    clickApproveButton: function clickApproveButton() {\n      this.approve(this.selectedRow, true, \"通过审批\");\n    },\n    clickRowApproveButton: function clickRowApproveButton(row) {\n      this.approve([row], true, \"通过审批\");\n    },\n    clickRejectButton: function clickRejectButton() {\n      this.selectStockTrans = this.selectedRow[0];\n      this.showRejectDialog = true;\n    },\n    clickRowRejectButton: function clickRowRejectButton(row) {\n      this.selectStockTrans = row;\n      this.showRejectDialog = true;\n    },\n    approve: function approve(nodes) {\n      var _this3 = this;\n\n      var isApprove = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var title = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"通过\";\n      DialogUtil.confirm(\"\\n                \\u786E\\u5B9A\\u8981\\u5C06\\u4EE5\\u4E0B\\u79FB\\u4F4D\\u5355 \".concat(title, \" \\u5417\\uFF1F </br>\\n                [ \").concat(nodes[0].number, \" ]\\n            \")).then(function () {\n        var se = _Object$assign({}, nodes[0]);\n\n        se.status = isApprove ? 3 : 4;\n        return _this3.$ajax.request(Api.stockTrans.approve, se);\n      }).then(function (resp) {\n        DialogUtil.toastSuccess(resp);\n\n        _this3.refreshData();\n      });\n    },\n    clickFinishButton: function clickFinishButton() {\n      this.finishSE(this.selectedRow);\n    },\n    clickRowFinishButton: function clickRowFinishButton(row) {\n      this.finishSE([row]);\n    },\n    finishSE: function finishSE(nodes) {\n      var _this4 = this;\n\n      DialogUtil.confirm(\"\\n                \\u786E\\u5B9A\\u8981\\u5B8C\\u6210\\u4EE5\\u4E0B\\u79FB\\u4F4D\\u5355\\uFF1F </br>\\n                [ \".concat(nodes[0].number, \" ]\\n            \")).then(function () {\n        var se = _Object$assign({}, nodes[0]);\n\n        se.status = 5;\n        return _this4.$ajax.request(Api.stockTrans.finish, se);\n      }).then(function (resp) {\n        DialogUtil.toastSuccess(resp);\n\n        _this4.refreshData();\n      });\n    },\n    clickSubmitButton: function clickSubmitButton() {\n      this.submit(this.selectedRow);\n    },\n    clickRowSubmitButton: function clickRowSubmitButton(row) {\n      this.submit([row]);\n    },\n    submit: function submit(nodes) {\n      var _this5 = this;\n\n      DialogUtil.confirm(\"\\n                \\u786E\\u5B9A\\u8981\\u5C06\\u4EE5\\u4E0B\\u79FB\\u4F4D\\u5355\\u63D0\\u4EA4\\u5BA1\\u6838\\u5417\\uFF1F </br>\\n                [ \".concat(nodes[0].number, \" ]\\n            \")).then(function () {\n        return _this5.$ajax.request(Api.stockTrans.submit, nodes[0]);\n      }).then(function (resp) {\n        DialogUtil.toastSuccess(resp);\n\n        _this5.refreshData();\n      });\n    },\n    clickDeliveryButton: function clickDeliveryButton() {\n      this.selectStockTrans = this.selectedRow[0];\n      this.showDeliveryFinishDialog = true;\n    },\n    clickRowDeliveryButton: function clickRowDeliveryButton(row) {\n      this.selectStockTrans = row;\n      this.showDeliveryFinishDialog = true;\n    },\n    delivery: function delivery(nodes) {},\n    stockText: function stockText(row) {\n      var isTo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var k = isTo ? 'To' : '';\n      return [row['warehouseCode' + k], row['reservoirCode' + k], row['stockCode' + k] + \"(\".concat(row['stockName' + k], \")\")].join(' / ');\n    }\n  },\n  watch: {},\n  computed: {\n    titleText: function titleText() {\n      return '移位';\n    },\n    categoryType: function categoryType() {\n      return this.type === 1 ? 3 : 4;\n    },\n    submitEnable: function submitEnable() {\n      if (this.selectedRow.length !== 1) return false;\n      return [1, 4].includes(this.selectedRow[0].status);\n    },\n    approveEnable: function approveEnable() {\n      if (this.selectedRow.length !== 1) return false;\n      return this.selectedRow[0].status === 2;\n    },\n    rejectEnable: function rejectEnable() {\n      if (this.selectedRow.length !== 1) return false;\n      return this.selectedRow[0].status === 2;\n    },\n    finishEnable: function finishEnable() {\n      if (this.selectedRow.length !== 1) return false;\n      return this.selectedRow[0].status === 3;\n    }\n  }\n};",{"version":3,"sources":["StockTransManagerView.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"StockTransManagerView flex-box flex-column\">\r\n        <search-card-layout\r\n                :loading=\"loading\"\r\n                @click-search=\"refreshData\"\r\n        >\r\n            <div class=\"flex-box search-card\">\r\n                <div class=\"\">\r\n                    <span>{{ titleText }}单号</span>\r\n                    <el-input v-model=\"filterForm.number\"></el-input>\r\n                </div>\r\n                <div class=\"\" style=\"width: 200px;\">\r\n                    <span>审批状态</span>\r\n                    <approve-selector\r\n                            v-model=\"filterForm.status\"\r\n                            :is-filter=\"true\"\r\n                            :is-stock-in=\"type === 1\"\r\n                    ></approve-selector>\r\n                </div>\r\n                <div class=\"\">\r\n                    <span>创建时间</span>\r\n                    <date-time-range-input\r\n                            :start-time.sync=\"filterForm.startTime\"\r\n                            :end-time.sync=\"filterForm.endTime\"\r\n                    ></date-time-range-input>\r\n                </div>\r\n            </div>\r\n\r\n            <el-button-curd-group\r\n                    slot=\"buttons\"\r\n                    :delete-disabled=\"!selectedRow.length\"\r\n                    :edit-disabled=\"selectedRow.length !== 1\"\r\n                    @click-add=\"clickAddButton\"\r\n                    @click-edit=\"clickEditButton\"\r\n                    @click-delete=\"clickDeleteButton\"\r\n            >\r\n                <el-button-group class=\"ml-xs\">\r\n                    <el-button-mini\r\n                            icon=\"iconfont icon-notes-medical\"\r\n                            :disabled=\"!submitEnable\"\r\n                            @click.native=\"clickSubmitButton\"\r\n                    >提交审核\r\n                    </el-button-mini>\r\n                    <el-button-mini\r\n                            icon=\"iconfont icon-check-circle\"\r\n                            :disabled=\"!approveEnable\"\r\n                            @click.native=\"clickApproveButton\"\r\n                    >审批通过\r\n                    </el-button-mini>\r\n                    <el-button-mini\r\n                            icon=\"iconfont icon-times-circle\"\r\n                            icon-color-class=\"color-red\"\r\n                            :disabled=\"!rejectEnable\"\r\n                            @click.native=\"clickRejectButton\"\r\n                    >驳回\r\n                    </el-button-mini>\r\n                    <el-button-mini\r\n                            icon=\"iconfont icon-circle\"\r\n                            icon-color-class=\"color-olive\"\r\n                            :disabled=\"!finishEnable\"\r\n                            @click.native=\"clickFinishButton\"\r\n                            v-if=\"type === 1\"\r\n                    >完成移位\r\n                    </el-button-mini>\r\n                </el-button-group>\r\n            </el-button-curd-group>\r\n\r\n\r\n        </search-card-layout>\r\n\r\n        <div class=\"flex-grow\">\r\n            <table-panel\r\n                    :loading=\"loading\"\r\n                    :data=\"data\"\r\n                    :paginate=\"paginate\"\r\n                    operate-width=\"140\"\r\n                    :selectedRow.sync=\"selectedRow\"\r\n                    @sort-change=\"sortChange\"\r\n                    :create-user-show=\"true\"\r\n                    :update-user-show=\"true\"\r\n            >\r\n                <el-table-column\r\n                        prop=\"id\"\r\n                        label=\"ID\"\r\n                        sortable=\"custom\"\r\n                        width=\"80\"\r\n                ></el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"number\"\r\n                        :label=\"`${titleText}单号`\"\r\n                        sortable=\"custom\"\r\n                        width=\"180\"\r\n                ></el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"moveCount\"\r\n                        :label=\"`明细条数`\"\r\n                        width=\"100\"\r\n                >\r\n                    <template slot-scope=\"{row}\">\r\n                        <el-button-mini\r\n                                type=\"text\"\r\n                                title=\"查看和编辑明细\"\r\n                                icon=\"iconfont icon-th-list\"\r\n                                @click.native=\"clickRowDetailButton(row)\"\r\n                        ></el-button-mini>\r\n                        <el-button-mini\r\n                                type=\"text\"\r\n                                icon=\"iconfont icon-plus-circle\"\r\n                                @click.native=\"clickRowAddMoveButton(row)\"\r\n                                v-if=\"[1,4].includes(row.status)\"\r\n                        ></el-button-mini>\r\n                        <span class=\"ml-xs\">{{row.moveCount}}</span>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"status\"\r\n                        :label=\"`${titleText}状态`\"\r\n                        sortable=\"custom\"\r\n                        width=\"105\"\r\n                >\r\n                    <div class=\"flex-box flex-center\" slot-scope=\"{row}\"\r\n                    >\r\n                        <approve-tags :status=\"row.status\" :is-stock-in=\"type===1\"></approve-tags>\r\n                        <div class=\"\" style=\"padding-top: 2px;margin-left: 2px;\"\r\n                             v-if=\"row.type === 2 && row.status === 5 && row.deliveryId !== 0\">\r\n                            <el-tag type=\"info\" class=\"cursor-p\">\r\n                                <i class=\"iconfont icon-truck\"></i>\r\n                            </el-tag>\r\n                        </div>\r\n                    </div>\r\n                </el-table-column>\r\n\r\n\r\n                <el-table-column\r\n                        prop=\"stockId\"\r\n                        :label=\"`源货架`\"\r\n                        sortable=\"custom\"\r\n                        width=\"120\"\r\n                >\r\n                    <template slot-scope=\"{row}\">\r\n                        <el-tooltip\r\n                                class=\"item\"\r\n                                effect=\"dark\"\r\n                                :content=\"stockText(row,false)\"\r\n                                placement=\"top\">\r\n                            <span class=\"cursor-p\">{{row.stockName}}</span>\r\n                        </el-tooltip>\r\n                    </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"stockTid\"\r\n                        :label=\"`目标货架`\"\r\n                        sortable=\"custom\"\r\n                        width=\"120\"\r\n                >\r\n                    <template slot-scope=\"{row}\">\r\n                        <el-tooltip\r\n                                class=\"item\"\r\n                                effect=\"dark\"\r\n                                :content=\"stockText(row,true)\"\r\n                                placement=\"top\">\r\n                            <span class=\"cursor-p\">{{row.stockNameTo}}</span>\r\n                        </el-tooltip>\r\n                    </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"remark\"\r\n                        :label=\"`备注`\"\r\n                        width=\"200\"\r\n                        :show-overflow-tooltip=\"true\"\r\n                >\r\n                </el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"rejectRemark\"\r\n                        :label=\"`驳回理由`\"\r\n                        width=\"200\"\r\n                        :show-overflow-tooltip=\"true\"\r\n                >\r\n                </el-table-column>\r\n\r\n                <template slot=\"operate\" slot-scope=\"{row}\">\r\n                    <el-button-mini\r\n                            type=\"text\"\r\n                            icon=\"edit\"\r\n                            title=\"编辑\"\r\n                            @click.native=\"clickRowEditButton(row)\"\r\n                    ></el-button-mini>\r\n                    <el-button-mini\r\n                            type=\"text\"\r\n                            title=\"预览查看\"\r\n                            icon=\"iconfont icon-eye1\"\r\n                            @click.native=\"clickRowPreviewButton(row)\"\r\n                    ></el-button-mini>\r\n                    <el-button-mini\r\n                            type=\"text\"\r\n                            icon=\"delete\"\r\n                            title=\"删除\"\r\n                            v-if=\"row.status === 1\"\r\n                            @click.native=\"clickRowDeleteButton(row)\"\r\n                    ></el-button-mini>\r\n                    <el-button-mini\r\n                            type=\"text\"\r\n                            icon=\"iconfont icon-notes-medical\"\r\n                            title=\"提交审批\"\r\n                            v-if=\"[1,4].includes(row.status) && row.moveCount > 0\"\r\n                            @click.native=\"clickRowSubmitButton(row)\"\r\n                    >\r\n                    </el-button-mini>\r\n                    <el-button-mini\r\n                            type=\"text\"\r\n                            icon=\"iconfont icon-check-circle\"\r\n                            title=\"审批通过\"\r\n                            v-if=\"row.status === 2\"\r\n                            @click.native=\"clickRowApproveButton(row)\"\r\n                    ></el-button-mini>\r\n                    <el-button-mini\r\n                            type=\"text\"\r\n                            icon=\"iconfont icon-times-circle\"\r\n                            title=\"驳回\"\r\n                            v-if=\"row.status === 2\"\r\n                            @click.native=\"clickRowRejectButton(row)\"\r\n                    ></el-button-mini>\r\n                    <el-button-mini\r\n                            type=\"text\"\r\n                            icon=\"iconfont icon-circle\"\r\n                            title=\"完成移位\"\r\n                            v-if=\"row.status === 3\"\r\n                            @click.native=\"clickRowFinishButton(row)\"\r\n                    ></el-button-mini>\r\n                </template>\r\n            </table-panel>\r\n        </div>\r\n\r\n        <stock-trans-add-dialog\r\n                :visible.sync=\"showAddDialog\"\r\n                :edit-id=\"editId\"\r\n                @finish=\"refreshData\"\r\n        ></stock-trans-add-dialog>\r\n        <trans-move-list-dialog\r\n                :visible.sync=\"showMoveListDialog\"\r\n                :stock-trans=\"selectStockTrans\"\r\n                :type=\"type\"\r\n                @close=\"refreshData\"\r\n        ></trans-move-list-dialog>\r\n        <trans-move-add-dialog\r\n                :visible.sync=\"showMoveAddDialog\"\r\n                :edit-id=\"0\"\r\n                :type=\"type\"\r\n                :stock-trans=\"selectStockTrans\"\r\n                @finish=\"refreshData\"\r\n        ></trans-move-add-dialog>\r\n        <stock-trans-preview-dialog\r\n                :visible.sync=\"showPreviewDialog\"\r\n                :edit-id=\"editId\"\r\n                :type=\"type\"\r\n        ></stock-trans-preview-dialog>\r\n        <stock-trans-reject-dialog\r\n                :visible.sync=\"showRejectDialog\"\r\n                :stock-trans=\"selectStockTrans\"\r\n                :type=\"type\"\r\n                @finish=\"refreshData\"\r\n        ></stock-trans-reject-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import DialogUtil from \"@/util/DialogUtil\";\r\n    import PaginateModel from \"@/project/model/PaginateModel\";\r\n    import Api from \"@/assets/api/Api\";\r\n    import EcUtil from \"@/util/EcUtil\";\r\n    import SearchCardLayout from \"@/components/layout-component/SearchCardLayout\";\r\n    import ElButtonMini from \"@/components/common/button/ElButtonMini\";\r\n    import TablePanel from \"@/components/layout-component/TablePanel\";\r\n    import ElButtonCurdGroup from \"@/components/common/button/ElButtonCurdGroup\";\r\n    import DateTimeRangeInput from \"@/components/common/input/DateTimeRangeInput\";\r\n    import CategorySelector from \"@/components/page-content/enum-selector/CategorySelector\";\r\n    import StockEntryAddDialog from \"@/components/page-content/stock-entry/dialog/StockEntryAddDialog\";\r\n    import MoveListDialog from \"@/components/page-content/stock-entry/dialog/MoveListDialog\";\r\n    import MoveAddDialog from \"@/components/page-content/stock-entry/dialog/MoveAddDialog\";\r\n    import ApproveSelector from \"@/components/page-content/enum-selector/ApproveSelector\";\r\n    import ApproveEnum from \"@/project/enum/ApproveEnum\";\r\n    import ApproveTags from \"@/components/page-content/enum-selector/ApproveTags\";\r\n    import StockEntryPreviewDialog from \"@/components/page-content/stock-entry/dialog/StockEntryPreviewDialog\";\r\n    import StockEntryRejectDialog from \"@/components/page-content/stock-entry/dialog/StockEntryRejectDialog\";\r\n    import StockEntryDeliveryFinishDialog\r\n        from \"@/components/page-content/stock-entry/dialog/StockEntryDeliveryFinishDialog\";\r\n    import StockTransModel from \"@/project/model/StockTransModel\";\r\n    import TransMoveAddDialog from \"@/components/page-content/stock-trans/dialog/TransMoveAddDialog\";\r\n    import TransMoveListDialog from \"@/components/page-content/stock-trans/dialog/TransMoveListDialog\";\r\n    import StockTransAddDialog from \"@/components/page-content/stock-trans/dialog/StockTransAddDialog\";\r\n    import StockTransRejectDialog from \"@/components/page-content/stock-trans/dialog/StockTransRejectDialog\";\r\n    import StockTransPreviewDialog from \"@/components/page-content/stock-trans/dialog/StockTransPreviewDialog\";\r\n\r\n    export default {\r\n        name: \"StockTransManagerView\",\r\n        components: {\r\n            StockTransPreviewDialog,\r\n            StockTransRejectDialog,\r\n            StockTransAddDialog,\r\n            TransMoveListDialog,\r\n            TransMoveAddDialog,\r\n            StockEntryDeliveryFinishDialog,\r\n            StockEntryRejectDialog,\r\n            StockEntryPreviewDialog,\r\n            ApproveTags,\r\n            ApproveSelector,\r\n            MoveAddDialog,\r\n            MoveListDialog,\r\n            StockEntryAddDialog,\r\n            CategorySelector,\r\n            DateTimeRangeInput,\r\n            ElButtonCurdGroup,\r\n            TablePanel,\r\n            ElButtonMini,\r\n            SearchCardLayout\r\n        },\r\n        props: {\r\n            // 出入库 1:入库；2：出库\r\n            type: {\r\n                default: 1\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                loading: false,\r\n                showAddDialog: false,\r\n                showMoveListDialog: false,\r\n                showMoveAddDialog: false,\r\n                showPreviewDialog: false,\r\n                showRejectDialog: false,\r\n                showDeliveryFinishDialog: false,\r\n                filterForm: new StockTransModel(),\r\n                data: [],\r\n                paginate: new PaginateModel(this.refreshData),\r\n                selectedRow: [],\r\n                sortingColumn: null,\r\n                editId: 0,\r\n                selectStockTrans: new StockTransModel(),\r\n                statusEnum: ApproveEnum\r\n            }\r\n        },\r\n        mounted() {\r\n            this.reload();\r\n        },\r\n        methods: {\r\n            reload() {\r\n                this.refreshData();\r\n            },\r\n            refreshData() {\r\n                this.loading = true;\r\n                this.$ajax.request(Api.stockTrans.list, {\r\n                    ...EcUtil.getSortField(this.sortingColumn),\r\n                    ...this.paginate.getJSON(),\r\n                    ...this.filterForm\r\n                }).then(resp => {\r\n                    this.data = resp.list;\r\n                    this.paginate.setPaginate(resp);\r\n                }).finally(() => this.loading = false)\r\n            },\r\n\r\n            sortChange(nodes) {\r\n                this.sortingColumn = nodes;\r\n                this.refreshData();\r\n            },\r\n\r\n            clickAddButton() {\r\n                this.editId = 0;\r\n                this.selectStockTrans = this.selectedRow[0];\r\n                this.showAddDialog = true;\r\n            },\r\n            clickEditButton() {\r\n                this.editId = this.selectedRow[0].id;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickDeleteButton() {\r\n                this.delete(this.selectedRow);\r\n            },\r\n            clickRowEditButton(row) {\r\n                this.editId = row.id;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickRowDeleteButton(row) {\r\n                this.delete([row]);\r\n            },\r\n            clickRowDetailButton(row) {\r\n                this.selectStockTrans = row;\r\n                this.showMoveListDialog = true;\r\n            },\r\n            clickRowPreviewButton(row) {\r\n                this.editId = row.id;\r\n                this.showPreviewDialog = true;\r\n            },\r\n            clickRowAddMoveButton(row) {\r\n                this.editId = 0;\r\n                this.selectStockTrans = row;\r\n                this.showMoveAddDialog = true;\r\n            },\r\n            delete(nodes) {\r\n                DialogUtil.confirm(`\r\n                    确定删除以下移位单吗？ <br>\r\n                    [ ${nodes.map(x => x.number).join(',')} ]\r\n                `).then(() => {\r\n                    return this.$ajax.request(Api.stockTrans.delete, {\r\n                        ids: nodes.map(x => x.id).join(',')\r\n                    });\r\n                }).then(resp => {\r\n                    DialogUtil.toastSuccess(resp);\r\n                    this.refreshData();\r\n                })\r\n            },\r\n            clickApproveButton() {\r\n                this.approve(this.selectedRow, true, \"通过审批\")\r\n            },\r\n            clickRowApproveButton(row) {\r\n                this.approve([row], true, \"通过审批\")\r\n            },\r\n            clickRejectButton() {\r\n                this.selectStockTrans = this.selectedRow[0];\r\n                this.showRejectDialog = true;\r\n            },\r\n            clickRowRejectButton(row) {\r\n                this.selectStockTrans = row;\r\n                this.showRejectDialog = true;\r\n            },\r\n            approve(nodes, isApprove = true, title = \"通过\") {\r\n                DialogUtil.confirm(`\r\n                    确定要将以下移位单 ${title} 吗？ </br>\r\n                    [ ${nodes[0].number} ]\r\n                `).then(() => {\r\n                    let se = Object.assign({}, nodes[0]);\r\n                    se.status = isApprove ? 3 : 4;\r\n                    return this.$ajax.request(Api.stockTrans.approve, se);\r\n                }).then(resp => {\r\n                    DialogUtil.toastSuccess(resp);\r\n                    this.refreshData();\r\n                })\r\n            },\r\n\r\n            clickFinishButton() {\r\n                this.finishSE(this.selectedRow);\r\n            },\r\n\r\n            clickRowFinishButton(row) {\r\n                this.finishSE([row]);\r\n            },\r\n\r\n            finishSE(nodes) {\r\n                DialogUtil.confirm(`\r\n                    确定要完成以下移位单？ </br>\r\n                    [ ${nodes[0].number} ]\r\n                `).then(() => {\r\n                    let se = Object.assign({}, nodes[0]);\r\n                    se.status = 5;\r\n                    return this.$ajax.request(Api.stockTrans.finish, se);\r\n                }).then(resp => {\r\n                    DialogUtil.toastSuccess(resp);\r\n                    this.refreshData();\r\n                })\r\n            },\r\n\r\n            clickSubmitButton() {\r\n                this.submit(this.selectedRow);\r\n            },\r\n            clickRowSubmitButton(row) {\r\n                this.submit([row]);\r\n            },\r\n            submit(nodes) {\r\n                DialogUtil.confirm(`\r\n                    确定要将以下移位单提交审核吗？ </br>\r\n                    [ ${nodes[0].number} ]\r\n                `).then(() => {\r\n                    return this.$ajax.request(Api.stockTrans.submit, nodes[0]);\r\n                }).then(resp => {\r\n                    DialogUtil.toastSuccess(resp);\r\n                    this.refreshData();\r\n                })\r\n            },\r\n            clickDeliveryButton() {\r\n                this.selectStockTrans = this.selectedRow[0];\r\n                this.showDeliveryFinishDialog = true;\r\n            },\r\n            clickRowDeliveryButton(row) {\r\n                this.selectStockTrans = row;\r\n                this.showDeliveryFinishDialog = true;\r\n            },\r\n            delivery(nodes) {\r\n\r\n            },\r\n\r\n            stockText(row, isTo = false) {\r\n                let k = isTo ? 'To' : '';\r\n                return [\r\n                    row['warehouseCode' + k],\r\n                    row['reservoirCode' + k],\r\n                    row['stockCode' + k] + `(${row['stockName' + k]})`\r\n                ].join(' / ');\r\n            },\r\n\r\n        },\r\n        watch: {},\r\n        computed: {\r\n            titleText() {\r\n                return '移位';\r\n            },\r\n            categoryType() {\r\n                return this.type === 1 ? 3 : 4;\r\n            },\r\n            submitEnable() {\r\n                if (this.selectedRow.length !== 1) return false;\r\n                return [1, 4].includes(this.selectedRow[0].status);\r\n            },\r\n            approveEnable() {\r\n                if (this.selectedRow.length !== 1) return false;\r\n                return this.selectedRow[0].status === 2;\r\n            },\r\n            rejectEnable() {\r\n                if (this.selectedRow.length !== 1) return false;\r\n                return this.selectedRow[0].status === 2;\r\n            },\r\n            finishEnable() {\r\n                if (this.selectedRow.length !== 1) return false;\r\n                return this.selectedRow[0].status === 3;\r\n            }\r\n        },\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import (reference) \"~style/all.less\";\r\n\r\n    .StockTransManagerView {\r\n    }\r\n</style>"],"sourceRoot":"src/components/page-content/stock-trans"}]}