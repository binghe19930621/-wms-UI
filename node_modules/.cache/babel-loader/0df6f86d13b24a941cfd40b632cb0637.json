{"remainingRequest":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\company\\CompanyManagerView.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\company\\CompanyManagerView.vue","mtime":1585370815925},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _objectSpread from \"E:\\\\\\u9879\\u76EE\\\\SKWMS\\\\wms-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SearchCardLayout from \"@/components/layout-component/SearchCardLayout\";\nimport CompanyModel from \"@/project/model/CompanyModel\";\nimport ElButtonCurdGroup from \"@/components/common/button/ElButtonCurdGroup\";\nimport PaginateModel from \"@/project/model/PaginateModel\";\nimport TablePanel from \"@/components/layout-component/TablePanel\";\nimport Api from \"@/assets/api/Api\";\nimport EcUtil from \"@/util/EcUtil\";\nimport ElButtonMini from \"@/components/common/button/ElButtonMini\";\nimport CompanyAddDialog from \"@/components/page-content/company/dialog/CompanyAddDialog\";\nimport DialogUtil from \"@/util/DialogUtil\";\nimport CompanyCategorySelector from \"@/components/page-content/company/comp/CompanyCategorySelector\";\nimport CompanySelector from \"@/components/page-content/enum-selector/CompanySelector\";\nexport default {\n  name: \"CompanyManagerView\",\n  components: {\n    CompanySelector: CompanySelector,\n    CompanyCategorySelector: CompanyCategorySelector,\n    CompanyAddDialog: CompanyAddDialog,\n    ElButtonMini: ElButtonMini,\n    TablePanel: TablePanel,\n    ElButtonCurdGroup: ElButtonCurdGroup,\n    SearchCardLayout: SearchCardLayout\n  },\n  props: {},\n  data: function data() {\n    return {\n      showCompanyDialog: false,\n      selectedRow: [],\n      loading: false,\n      data: [],\n      filterForm: new CompanyModel(),\n      paginate: new PaginateModel(this.refreshData),\n      sortingColumn: [],\n      editId: 0\n    };\n  },\n  mounted: function mounted() {\n    this.reload();\n  },\n  methods: {\n    reload: function reload() {\n      this.refreshData();\n      this.filterForm.category = 0;\n    },\n    refreshData: function refreshData() {\n      var _this = this;\n\n      this.loading = true;\n      this.$ajax.request(Api.company.list, _objectSpread({}, this.filterForm, this.paginate.getJSON(), EcUtil.getSortField(this.sortingColumn))).then(function (resp) {\n        _this.data = resp.list;\n\n        _this.paginate.setPaginate(resp);\n      }).finally(function () {\n        return _this.loading = false;\n      });\n    },\n    sortChange: function sortChange(column) {\n      var _this2 = this;\n\n      this.sortingColumn = column;\n      this.$nextTick(function () {\n        return _this2.refreshData();\n      });\n    },\n    clickAddButton: function clickAddButton() {\n      this.editId = 0;\n      this.showCompanyDialog = true;\n    },\n    clickEditButton: function clickEditButton() {\n      this.editId = this.selectedRow[0].id;\n      this.showCompanyDialog = true;\n    },\n    clickDeleteButton: function clickDeleteButton() {\n      this.deleteRows(this.selectedRow);\n    },\n    clickRowDelete: function clickRowDelete(row) {\n      this.deleteRows([row]);\n    },\n    clickRowEdit: function clickRowEdit(row) {\n      this.editId = row.id;\n      this.showCompanyDialog = true;\n    },\n    deleteRows: function deleteRows(rows) {\n      var _this3 = this;\n\n      DialogUtil.confirm(\"\\n                \\u786E\\u5B9A\\u8981\\u5220\\u9664\\u4EE5\\u4E0B\\u5408\\u4F5C\\u4F19\\u4F34\\u5417? <br>\\n                [ \".concat(rows.map(function (x) {\n        return x.name;\n      }).join(','), \" ]\\n            \")).then(function () {\n        return _this3.$ajax.request(Api.company.delete, {\n          ids: rows.map(function (x) {\n            return x.id;\n          }).join(',')\n        });\n      }).then(function (resp) {\n        DialogUtil.toastSuccess(resp);\n\n        _this3.refreshData();\n      });\n    }\n  },\n  watch: {},\n  computed: {}\n};",{"version":3,"sources":["CompanyManagerView.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"CompanyManagerView flex-box flex-column\">\r\n        <search-card-layout\r\n                @click-search=\"refreshData\"\r\n                :loading=\"loading\"\r\n        >\r\n            <el-form class=\"flex-box flex-center search-card\">\r\n                <div class=\"\" style=\"width: 300px;\">\r\n                    <span class=\"\">公司编码</span>\r\n                    <el-input v-model=\"filterForm.code\"></el-input>\r\n                </div>\r\n                <div class=\"\" style=\"width: 300px;\">\r\n                    <span class=\"\">公司名称</span>\r\n                    <el-input v-model=\"filterForm.name\"></el-input>\r\n                </div>\r\n                <div class=\"\" style=\"width: 150px;\">\r\n                    <span class=\"\">分类</span>\r\n                    <company-category-selector\r\n                            v-model=\"filterForm.category\"\r\n                            :is-filter=\"true\"\r\n                    ></company-category-selector>\r\n                </div>\r\n                <div class=\"\" style=\"width: 200px;\">\r\n                    <span class=\"\">联系人姓名</span>\r\n                    <el-input v-model=\"filterForm.contactName\"></el-input>\r\n                </div>\r\n                <div class=\"\" style=\"width: 170px;\">\r\n                    <span class=\"\">手机号</span>\r\n                    <el-input v-model=\"filterForm.mobile\"></el-input>\r\n                </div>\r\n                <div class=\"\" style=\"width: 180px;\">\r\n                    <span class=\"\">座机</span>\r\n                    <el-input v-model=\"filterForm.phone\"></el-input>\r\n                </div>\r\n                <div class=\"\" style=\"width: 260px;\">\r\n                    <span class=\"\">Email</span>\r\n                    <el-input v-model=\"filterForm.email\"></el-input>\r\n                </div>\r\n            </el-form>\r\n\r\n            <el-button-curd-group\r\n                    slot=\"buttons\"\r\n                    :edit-disabled=\"selectedRow.length !== 1\"\r\n                    :delete-disabled=\"!selectedRow.length\"\r\n                    @click-add=\"clickAddButton\"\r\n                    @click-edit=\"clickEditButton\"\r\n                    @click-delete=\"clickDeleteButton\"\r\n            ></el-button-curd-group>\r\n        </search-card-layout>\r\n\r\n        <div class=\"flex-grow\">\r\n            <table-panel\r\n                    :loading=\"loading\"\r\n                    :data=\"data\"\r\n                    :paginate=\"paginate\"\r\n                    operate-width=\"65\"\r\n                    :selected-row.sync=\"selectedRow\"\r\n                    @sort-change=\"sortChange\"\r\n                    :update-user-show=\"true\"\r\n                    :create-user-show=\"true\"\r\n            >\r\n\r\n                <el-table-column\r\n                        prop=\"id\"\r\n                        label=\"ID\"\r\n                        width=\"80\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"code\"\r\n                        label=\"编码\"\r\n                        width=\"180\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"category\"\r\n                        label=\"分类\"\r\n                        width=\"80\"\r\n                        sortable=\"custom\"\r\n                >\r\n                    <template slot-scope=\"{row}\">\r\n                        <el-tag type=\"info\" v-if=\"row.category === 1\">供应商</el-tag>\r\n                        <el-tag type=\"primary\" v-if=\"row.category === 2\">客户</el-tag>\r\n                        <el-tag type=\"warning\" v-if=\"row.category === 3\">承运商</el-tag>\r\n                    </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"name\"\r\n                        label=\"公司名称\"\r\n                        min-width=\"250\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"contactName\"\r\n                        label=\"联系人\"\r\n                        width=\"120\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"mobile\"\r\n                        label=\"联系人手机\"\r\n                        width=\"120\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"phone\"\r\n                        label=\"座机\"\r\n                        width=\"120\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n\r\n                <template slot=\"operate\" slot-scope=\"{row}\">\r\n                    <el-button-mini icon=\"edit\" type=\"text\" @click.native=\"clickRowEdit(row)\"></el-button-mini>\r\n                    <el-button-mini icon=\"delete\" type=\"text\" @click.native=\"clickRowDelete(row)\"></el-button-mini>\r\n                </template>\r\n\r\n\r\n            </table-panel>\r\n        </div>\r\n        <company-add-dialog\r\n                :visible.sync=\"showCompanyDialog\"\r\n                :edit-id=\"editId\"\r\n                @finish=\"refreshData\"\r\n        ></company-add-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import SearchCardLayout from \"@/components/layout-component/SearchCardLayout\";\r\n    import CompanyModel from \"@/project/model/CompanyModel\";\r\n    import ElButtonCurdGroup from \"@/components/common/button/ElButtonCurdGroup\";\r\n    import PaginateModel from \"@/project/model/PaginateModel\";\r\n    import TablePanel from \"@/components/layout-component/TablePanel\";\r\n    import Api from \"@/assets/api/Api\";\r\n    import EcUtil from \"@/util/EcUtil\";\r\n    import ElButtonMini from \"@/components/common/button/ElButtonMini\";\r\n    import CompanyAddDialog from \"@/components/page-content/company/dialog/CompanyAddDialog\";\r\n    import DialogUtil from \"@/util/DialogUtil\";\r\n    import CompanyCategorySelector from \"@/components/page-content/company/comp/CompanyCategorySelector\";\r\n    import CompanySelector from \"@/components/page-content/enum-selector/CompanySelector\";\r\n\r\n    export default {\r\n        name: \"CompanyManagerView\",\r\n        components: {\r\n            CompanySelector,\r\n            CompanyCategorySelector,\r\n            CompanyAddDialog, ElButtonMini, TablePanel, ElButtonCurdGroup, SearchCardLayout\r\n        },\r\n        props: {},\r\n        data() {\r\n            return {\r\n                showCompanyDialog: false,\r\n                selectedRow: [],\r\n                loading: false,\r\n                data: [],\r\n                filterForm: new CompanyModel(),\r\n                paginate: new PaginateModel(this.refreshData),\r\n                sortingColumn: [],\r\n                editId: 0,\r\n            }\r\n        },\r\n        mounted() {\r\n            this.reload();\r\n        },\r\n        methods: {\r\n            reload() {\r\n                this.refreshData();\r\n                this.filterForm.category = 0;\r\n            },\r\n            refreshData() {\r\n                this.loading = true;\r\n                this.$ajax.request(Api.company.list, {\r\n                    ...this.filterForm,\r\n                    ...this.paginate.getJSON(),\r\n                    ...EcUtil.getSortField(this.sortingColumn)\r\n                }).then(resp => {\r\n                    this.data = resp.list;\r\n                    this.paginate.setPaginate(resp);\r\n                }).finally(() => this.loading = false)\r\n            },\r\n            sortChange(column) {\r\n                this.sortingColumn = column;\r\n                this.$nextTick(() => this.refreshData());\r\n            },\r\n            clickAddButton() {\r\n                this.editId = 0;\r\n                this.showCompanyDialog = true;\r\n            },\r\n            clickEditButton() {\r\n                this.editId = this.selectedRow[0].id;\r\n                this.showCompanyDialog = true;\r\n            },\r\n            clickDeleteButton() {\r\n                this.deleteRows(this.selectedRow);\r\n            },\r\n            clickRowDelete(row) {\r\n                this.deleteRows([row])\r\n            },\r\n            clickRowEdit(row) {\r\n                this.editId = row.id;\r\n                this.showCompanyDialog = true;\r\n            },\r\n            deleteRows(rows) {\r\n                DialogUtil.confirm(`\r\n                    确定要删除以下合作伙伴吗? <br>\r\n                    [ ${rows.map(x => x.name).join(',')} ]\r\n                `).then(() => {\r\n                    return this.$ajax.request(Api.company.delete, {\r\n                        ids: rows.map(x => x.id).join(',')\r\n                    })\r\n                }).then(resp => {\r\n                    DialogUtil.toastSuccess(resp);\r\n                    this.refreshData();\r\n                });\r\n            },\r\n        },\r\n        watch: {},\r\n        computed: {},\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import (reference) \"~style/all.less\";\r\n\r\n    .CompanyManagerView {\r\n    }\r\n</style>"],"sourceRoot":"src/components/page-content/company"}]}