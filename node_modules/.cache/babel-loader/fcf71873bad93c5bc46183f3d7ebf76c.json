{"remainingRequest":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\enum-selector\\MaterialSelector.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\enum-selector\\MaterialSelector.vue","mtime":1585370815946},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Api from \"@/assets/api/Api\";\nimport CollectionUtil from \"@/util/CollectionUtil\";\nexport default {\n  name: \"MaterialSelector\",\n  components: {},\n  props: {\n    types: {\n      default: ''\n    },\n    value: {\n      default: 0\n    },\n    width: {\n      default: '200px'\n    },\n    filterIds: {\n      default: function _default() {\n        return [];\n      }\n    },\n    needFilter: {\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      materials: []\n    };\n  },\n  mounted: function mounted() {\n    this.reload();\n  },\n  methods: {\n    reload: function reload() {\n      this.refreshList();\n    },\n    refreshList: function refreshList() {\n      var _this = this;\n\n      this.$ajax.request(Api.material.selectByType, {\n        types: this.types\n      }).then(function (resp) {\n        _this.materials = resp;\n      });\n    },\n    change: function change(a) {\n      if (!a) return;\n      this.$emit('input', a[a.length - 1]);\n    }\n  },\n  watch: {},\n  computed: {\n    materialTree: function materialTree() {\n      var _this2 = this;\n\n      var tree = [];\n      this.materials.forEach(function (m) {\n        var fn = tree.find(function (f) {\n          return m.categoryId === f.id;\n        });\n\n        if (fn) {\n          fn.children.push(m);\n        } else {\n          var f = {\n            id: m.categoryId,\n            name: m.categoryName,\n            children: [m]\n          };\n          tree.push(f);\n        }\n      });\n\n      if (this.needFilter || this.filterIds.length) {\n        tree = CollectionUtil.filterTree(tree, function (x) {\n          return _this2.filterIds.includes(x.id);\n        }, 'children', 2);\n      }\n\n      return tree;\n    },\n    valueUse: function valueUse() {\n      var _this3 = this;\n\n      var c = this.materials.find(function (x) {\n        return x.id === _this3.value;\n      });\n      if (!c) return [];\n      return [c.categoryId, c.id];\n    }\n  }\n};",{"version":3,"sources":["MaterialSelector.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAcA,OAAA,GAAA,MAAA,kBAAA;AACA,OAAA,cAAA,MAAA,uBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,kBADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,OAAA,EAAA;AADA,KADA;AAIA,IAAA,KAAA,EAAA;AACA,MAAA,OAAA,EAAA;AADA,KAJA;AAOA,IAAA,KAAA,EAAA;AACA,MAAA,OAAA,EAAA;AADA,KAPA;AAUA,IAAA,SAAA,EAAA;AACA,MAAA,OADA,sBACA;AACA,eAAA,EAAA;AACA;AAHA,KAVA;AAeA,IAAA,UAAA,EAAA;AACA,MAAA,OAAA,EAAA;AADA;AAfA,GAHA;AAsBA,EAAA,IAtBA,kBAsBA;AACA,WAAA;AACA,MAAA,SAAA,EAAA;AADA,KAAA;AAGA,GA1BA;AA2BA,EAAA,OA3BA,qBA2BA;AACA,SAAA,MAAA;AACA,GA7BA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,WAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AAAA;;AACA,WAAA,KAAA,CAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AACA,QAAA,KAAA,EAAA,KAAA;AADA,OAAA,EAEA,IAFA,CAEA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,IAAA;AACA,OAJA;AAKA,KAVA;AAWA,IAAA,MAXA,kBAWA,CAXA,EAWA;AACA,UAAA,CAAA,CAAA,EAAA;AACA,WAAA,KAAA,CAAA,OAAA,EAAA,CAAA,CAAA,CAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AACA;AAdA,GA9BA;AA8CA,EAAA,KAAA,EAAA,EA9CA;AA+CA,EAAA,QAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,UAAA,IAAA,GAAA,EAAA;AACA,WAAA,SAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,EAAA,GAAA,IAAA,CAAA,IAAA,CAAA,UAAA,CAAA,EAAA;AACA,iBAAA,CAAA,CAAA,UAAA,KAAA,CAAA,CAAA,EAAA;AACA,SAFA,CAAA;;AAGA,YAAA,EAAA,EAAA;AACA,UAAA,EAAA,CAAA,QAAA,CAAA,IAAA,CAAA,CAAA;AACA,SAFA,MAEA;AACA,cAAA,CAAA,GAAA;AACA,YAAA,EAAA,EAAA,CAAA,CAAA,UADA;AAEA,YAAA,IAAA,EAAA,CAAA,CAAA,YAFA;AAGA,YAAA,QAAA,EAAA,CAAA,CAAA;AAHA,WAAA;AAKA,UAAA,IAAA,CAAA,IAAA,CAAA,CAAA;AACA;AACA,OAdA;;AAeA,UAAA,KAAA,UAAA,IAAA,KAAA,SAAA,CAAA,MAAA,EAAA;AACA,QAAA,IAAA,GAAA,cAAA,CAAA,UAAA,CAAA,IAAA,EAAA,UAAA,CAAA;AAAA,iBAAA,MAAA,CAAA,SAAA,CAAA,QAAA,CAAA,CAAA,CAAA,EAAA,CAAA;AAAA,SAAA,EAAA,UAAA,EAAA,CAAA,CAAA;AACA;;AACA,aAAA,IAAA;AACA,KAtBA;AAuBA,IAAA,QAvBA,sBAuBA;AAAA;;AACA,UAAA,CAAA,GAAA,KAAA,SAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,KAAA,MAAA,CAAA,KAAA;AAAA,OAAA,CAAA;AACA,UAAA,CAAA,CAAA,EAAA,OAAA,EAAA;AACA,aAAA,CAAA,CAAA,CAAA,UAAA,EAAA,CAAA,CAAA,EAAA,CAAA;AACA;AA3BA;AA/CA,CAAA","sourcesContent":["<template>\r\n    <div class=\"MaterialSelector\">\r\n        <el-cascader\r\n                :style=\"{'width' : width}\"\r\n                :options=\"materialTree\"\r\n                :show-all-levels=\"true\"\r\n                :props=\"{'value': 'id', 'label' : 'name'}\"\r\n                :value=\"valueUse\"\r\n                @input=\"change\"\r\n        ></el-cascader>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Api from \"@/assets/api/Api\";\r\n    import CollectionUtil from \"@/util/CollectionUtil\";\r\n\r\n    export default {\r\n        name: \"MaterialSelector\",\r\n        components: {},\r\n        props: {\r\n            types: {\r\n                default: ''\r\n            },\r\n            value: {\r\n                default: 0\r\n            },\r\n            width: {\r\n                default: '200px'\r\n            },\r\n            filterIds: {\r\n                default() {\r\n                    return [];\r\n                }\r\n            },\r\n            needFilter:{\r\n                default : false\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                materials: []\r\n            }\r\n        },\r\n        mounted() {\r\n            this.reload();\r\n        },\r\n        methods: {\r\n            reload() {\r\n                this.refreshList();\r\n            },\r\n            refreshList() {\r\n                this.$ajax.request(Api.material.selectByType, {\r\n                    types: this.types\r\n                }).then(resp => {\r\n                    this.materials = resp;\r\n                });\r\n            },\r\n            change(a) {\r\n                if (!a) return;\r\n                this.$emit('input', a[a.length - 1]);\r\n            }\r\n        },\r\n        watch: {},\r\n        computed: {\r\n            materialTree() {\r\n                let tree = [];\r\n                this.materials.forEach(m => {\r\n                    let fn = tree.find(f => {\r\n                        return m.categoryId === f.id\r\n                    });\r\n                    if (fn) {\r\n                        fn.children.push(m);\r\n                    } else {\r\n                        let f = {\r\n                            id: m.categoryId,\r\n                            name: m.categoryName,\r\n                            children: [m]\r\n                        };\r\n                        tree.push(f);\r\n                    }\r\n                });\r\n                if( this.needFilter || this.filterIds.length){\r\n                    tree = CollectionUtil.filterTree(tree, x => this.filterIds.includes(x.id), 'children', 2);\r\n                }\r\n                return tree;\r\n            },\r\n            valueUse() {\r\n                let c = this.materials.find(x => x.id === this.value);\r\n                if (!c) return [];\r\n                return [c.categoryId, c.id];\r\n            }\r\n        },\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import (reference) \"~style/all.less\";\r\n\r\n    .MaterialSelector {\r\n    }\r\n</style>"],"sourceRoot":"src/components/page-content/enum-selector"}]}