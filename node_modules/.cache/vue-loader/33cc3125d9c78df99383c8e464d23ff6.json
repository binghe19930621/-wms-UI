{"remainingRequest":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\user\\UserManagerView.vue?vue&type=style&index=0&id=63af6092&lang=less&scoped=true&","dependencies":[{"path":"E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\user\\UserManagerView.vue","mtime":1585370815988},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\less-loader\\dist\\cjs.js","mtime":1593394904823},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import (reference) \"~style/all.less\";\n\n.UserManagerView {\n}\n",{"version":3,"sources":["UserManagerView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwOA;;AAEA;AACA","file":"UserManagerView.vue","sourceRoot":"src/components/page-content/user","sourcesContent":["<template>\r\n    <div class=\"UserManagerView flex-box flex-column \">\r\n        <search-card-layout\r\n                :loading=\"loading\"\r\n                @click-search=\"refreshData\"\r\n        >\r\n            <el-form class=\"flex-box flex-center search-card\">\r\n                <div class=\"\" style=\"width: 200px;\">\r\n                    <span class=\"\">用户名</span>\r\n                    <el-input v-model=\"filterForm.userName\"></el-input>\r\n                </div>\r\n                <div class=\"\" style=\"width: 200px;\">\r\n                    <span class=\"\">真实姓名</span>\r\n                    <el-input v-model=\"filterForm.realName\"></el-input>\r\n                </div>\r\n                <div class=\"\" style=\"width: 150px;\">\r\n                    <span class=\"\">是否激活</span>\r\n                    <el-select v-model=\"filterForm.activated\">\r\n                        <el-option label=\"全部\" :value=\"0\"></el-option>\r\n                        <el-option label=\"未激活\" :value=\"1\"></el-option>\r\n                        <el-option label=\"已激活\" :value=\"2\"></el-option>\r\n                    </el-select>\r\n                </div>\r\n                <div class=\"\" style=\"width: 150px;\">\r\n                    <span class=\"\">角色</span>\r\n                    <role-selector v-model=\"filterForm.roleId\" :is-filter=\"true\"></role-selector>\r\n                </div>\r\n            </el-form>\r\n\r\n            <div class=\"\" slot=\"buttons\">\r\n                <el-button-curd-group\r\n                        :delete-disabled=\"!selectedRow.length\"\r\n                        :edit-disabled=\"selectedRow.length !== 1\"\r\n                        @click-add=\"clickAddButton\"\r\n                        @click-edit=\"clickEditButton\"\r\n                        @click-delete=\"clickDeleteButton\"\r\n                ></el-button-curd-group>\r\n            </div>\r\n        </search-card-layout>\r\n\r\n        <div class=\"flex-grow\">\r\n            <table-panel\r\n                    :loading=\"loading\"\r\n                    :data=\"data\"\r\n                    :paginate=\"paginate\"\r\n                    operate-width=\"80\"\r\n                    :selectedRow.sync=\"selectedRow\"\r\n                    @sort-change=\"sortChange\"\r\n            >\r\n                <el-table-column\r\n                        prop=\"id\"\r\n                        label=\"ID\"\r\n                        width=\"70\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n                <el-table-column\r\n                        prop=\"userName\"\r\n                        label=\"用户名\"\r\n                        width=\"120\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n                <el-table-column\r\n                        prop=\"realName\"\r\n                        label=\"真实姓名\"\r\n                        width=\"120\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n                <el-table-column\r\n                        prop=\"roleId\"\r\n                        label=\"角色\"\r\n                        width=\"120\"\r\n                        sortable=\"custom\"\r\n                >\r\n                    <span slot-scope=\"{row}\">{{ row.roleName }}</span>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"mobile\"\r\n                        label=\"手机号\"\r\n                        width=\"120\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n                <el-table-column\r\n                        prop=\"phone\"\r\n                        label=\"座机\"\r\n                        width=\"110\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n                <el-table-column\r\n                        prop=\"activated\"\r\n                        label=\"激活\"\r\n                        width=\"80\"\r\n                        sortable=\"custom\"\r\n                >\r\n                    <template slot-scope=\"{row}\">\r\n                        <el-tag v-if=\"row.activated === 1\" type=\"warning\">未激活</el-tag>\r\n                        <el-tag v-if=\"row.activated === 2\" type=\"success\">已激活</el-tag>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"email\"\r\n                        label=\"电子邮箱\"\r\n                        min-width=\"200\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n                <el-table-column\r\n                        prop=\"departId\"\r\n                        label=\"所属部门\"\r\n                        min-width=\"200\"\r\n                        sortable=\"custom\"\r\n                >\r\n                    <template slot-scope=\"{row}\">{{row.departName}}</template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"createTime\"\r\n                        label=\"创建时间\"\r\n                        min-width=\"150\"\r\n                        sortable=\"custom\"\r\n                ></el-table-column>\r\n\r\n                <template slot=\"operate\" slot-scope=\"{row}\">\r\n                    <el-button-mini type=\"text\" icon=\"edit\" title=\"编辑\"\r\n                                    @click.native=\"clickRowEdit(row)\"></el-button-mini>\r\n                    <el-button-mini type=\"text\" icon=\"delete\" title=\"删除\"\r\n                                    @click.native=\"clickRowDelete(row)\"></el-button-mini>\r\n                </template>\r\n            </table-panel>\r\n        </div>\r\n\r\n        <user-add-dialog\r\n                :visible.sync=\"showAddDialog\"\r\n                :user-id=\"editId\"\r\n                @finish=\"editDialogFinish\"\r\n        >\r\n        </user-add-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import SearchCardLayout from \"@/components/layout-component/SearchCardLayout\";\r\n    import ElButtonMini from \"@/components/common/button/ElButtonMini\";\r\n    import ElButtonCurdGroup from \"@/components/common/button/ElButtonCurdGroup\";\r\n    import TablePanel from \"@/components/layout-component/TablePanel\";\r\n    import Api from \"@/assets/api/Api\";\r\n    import PaginateModel from \"@/project/model/PaginateModel\";\r\n    import EcUtil from \"@/util/EcUtil\";\r\n    import UserAddDialog from \"@/components/page-content/user/dialog/UserAddDialog\";\r\n    import DialogUtil from \"@/util/DialogUtil\";\r\n    import UserModel from \"@/project/model/UserModel\";\r\n    import RoleSelector from \"@/components/page-content/enum-selector/RoleSelector\";\r\n\r\n    export default {\r\n        name: \"UserManagerView\",\r\n        components: {RoleSelector, UserAddDialog, TablePanel, ElButtonCurdGroup, ElButtonMini, SearchCardLayout},\r\n        props: {},\r\n        data() {\r\n            return {\r\n                loading: true,\r\n                showAddDialog: false,\r\n                filterForm: new UserModel(),\r\n                data: [],\r\n                paginate: new PaginateModel(this.refreshData),\r\n                selectedRow: [],\r\n                sortingColumn: null,\r\n                editId: 0,\r\n            }\r\n        },\r\n        mounted() {\r\n            this.reload();\r\n        },\r\n        methods: {\r\n            reload() {\r\n                this.refreshData();\r\n            },\r\n\r\n            refreshData() {\r\n                this.loading = true;\r\n                this.$ajax.request(Api.user.list, {\r\n                    ...this.filterForm,\r\n                    ...this.paginate.getJSON(),\r\n                    ...EcUtil.getSortField(this.sortingColumn)\r\n                }).then(resp => {\r\n                    this.data = resp.list;\r\n                    this.paginate.setPaginate(resp);\r\n                }).finally(() => this.loading = false)\r\n            },\r\n\r\n            sortChange(column) {\r\n                this.sortingColumn = column;\r\n                this.$nextTick(() => this.refreshData());\r\n            },\r\n            clickAddButton() {\r\n                this.editId = 0;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickEditButton() {\r\n                this.editId = this.selectedRow[0].id;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickDeleteButton() {\r\n                this.deleteRows(this.selectedRow);\r\n            },\r\n            deleteRows(nodes) {\r\n                DialogUtil.confirm(`\r\n                    确定要删除以下用户？ <br>\r\n                    [ ${nodes.map(x => x.userName).join(',')} ]\r\n                `).then(() => {\r\n                    return this.$ajax.request(Api.user.remove, {\r\n                        ids: nodes.map(x => x.id).join(',')\r\n                    })\r\n                }).then(resp => {\r\n                    DialogUtil.toastSuccess(resp);\r\n                    this.refreshData();\r\n                })\r\n            },\r\n            editDialogFinish() {\r\n                this.refreshData();\r\n            },\r\n            clickRowEdit(row) {\r\n                this.editId = row.id\r\n                this.showAddDialog = true;\r\n            },\r\n            clickRowDelete(row) {\r\n                this.deleteRows([row])\r\n            }\r\n        },\r\n        watch: {},\r\n        computed: {},\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import (reference) \"~style/all.less\";\r\n\r\n    .UserManagerView {\r\n    }\r\n</style>"]}]}