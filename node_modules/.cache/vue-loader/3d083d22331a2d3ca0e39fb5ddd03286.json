{"remainingRequest":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\stock-trans\\dialog\\TransMoveListDialog.vue?vue&type=style&index=0&id=74e5b5aa&lang=less&scoped=true&","dependencies":[{"path":"E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\stock-trans\\dialog\\TransMoveListDialog.vue","mtime":1585370815984},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\less-loader\\dist\\cjs.js","mtime":1593394904823},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import (reference) \"~style/all.less\";\n\n.TransMoveListDialog {\n}\n",{"version":3,"sources":["TransMoveListDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6PA;;AAEA;AACA","file":"TransMoveListDialog.vue","sourceRoot":"src/components/page-content/stock-trans/dialog","sourcesContent":["<template>\r\n    <div class=\"TransMoveListDialog\">\r\n        <el-dialog\r\n                width=\"1000px\"\r\n                :visible=\"visible\"\r\n                @update:visible=\"showDialog\"\r\n                :title=\"title\"\r\n                @closed=\"$emit('close')\"\r\n        >\r\n            <div class=\"mb-xs fz-xs title-text-block\">\r\n                <span>{{ typeText }}单号：{{ stockTrans.number }}</span>\r\n                <span>订单号：{{ stockTrans.number }}</span>\r\n                <span>源货架：\r\n                    <el-tooltip\r\n                            class=\"item\"\r\n                            effect=\"dark\"\r\n                            :content=\"stockText(stockTrans,false)\"\r\n                            placement=\"bottom\"\r\n                    >\r\n                        <el-tag type=\"info\" class=\"cursor-p\">{{stockTrans.stockName}}</el-tag>\r\n                    </el-tooltip>\r\n                </span>\r\n                <span>目标货架：\r\n                    <el-tooltip\r\n                            class=\"item\"\r\n                            effect=\"dark\"\r\n                            :content=\"stockText(stockTrans,true)\"\r\n                            placement=\"bottom\"\r\n                    >\r\n                        <el-tag type=\"success\" class=\"cursor-p\">{{stockTrans.stockNameTo}}</el-tag>\r\n                    </el-tooltip>\r\n                </span>\r\n            </div>\r\n            <div class=\"mb-xs\">\r\n                <el-button-curd-group\r\n                        slot=\"buttons\"\r\n                        :add-disabled=\"!canEdit\"\r\n                        :delete-disabled=\"!selectedRow.length || !canEdit\"\r\n                        :edit-disabled=\"selectedRow.length !== 1 || !canEdit\"\r\n                        @click-add=\"clickAddButton\"\r\n                        @click-edit=\"clickEditButton\"\r\n                        @click-delete=\"clickDeleteButton\"\r\n                ></el-button-curd-group>\r\n            </div>\r\n            <div class=\"\">\r\n                <table-panel\r\n                        :loading=\"loading\"\r\n                        :data=\"data\"\r\n                        operate-width=\"80\"\r\n                        :selectedRow.sync=\"selectedRow\"\r\n                        :create-user-show=\"true\"\r\n                        :update-user-show=\"true\"\r\n                        :show-all-warehouse=\"false\"\r\n                        :show-paginate=\"false\"\r\n                        :fix-height=\"360\"\r\n                        :sortable=\"null\"\r\n                        :show-index=\"false\"\r\n                        ref=\"table\"\r\n                >\r\n                    <el-table-column\r\n                            prop=\"materialName\"\r\n                            label=\"物品名称\"\r\n                            width=\"160\"\r\n                    ></el-table-column>\r\n\r\n                    <el-table-column\r\n                            prop=\"quantity\"\r\n                            label=\"实际数量\"\r\n                            width=\"100\"\r\n                    ></el-table-column>\r\n\r\n                    <el-table-column\r\n                            prop=\"materialUnitName\"\r\n                            label=\"单位\"\r\n                            width=\"70\"\r\n                    ></el-table-column>\r\n\r\n                    <el-table-column\r\n                            prop=\"stockId\"\r\n                            label=\"源货架\"\r\n                            width=\"120\"\r\n                    >\r\n                        <template slot-scope=\"{row}\">\r\n                            <el-tooltip\r\n                                    class=\"item\"\r\n                                    effect=\"dark\"\r\n                                    :content=\"stockText(row,false)\"\r\n                                    placement=\"top\">\r\n                                <span class=\"cursor-p\">{{row.stockName}}</span>\r\n                            </el-tooltip>\r\n                        </template>\r\n                    </el-table-column>\r\n\r\n                    <el-table-column\r\n                            prop=\"stockTid\"\r\n                            label=\"目标货架\"\r\n                            width=\"120\"\r\n                    >\r\n                        <template slot-scope=\"{row}\">\r\n                            <el-tooltip\r\n                                    class=\"item\"\r\n                                    effect=\"dark\"\r\n                                    :content=\"stockText(row,true)\"\r\n                                    placement=\"top\">\r\n                                <span class=\"cursor-p\">{{row.stockNameTo}}</span>\r\n                            </el-tooltip>\r\n                        </template>\r\n                    </el-table-column>\r\n\r\n                    <template slot=\"operate\" slot-scope=\"{row}\">\r\n                        <el-button-mini\r\n                                type=\"text\"\r\n                                icon=\"edit\"\r\n                                @click.native=\"clickRowEditButton(row)\"\r\n                                v-if=\"canEdit\"\r\n                        ></el-button-mini>\r\n                        <el-button-mini\r\n                                type=\"text\"\r\n                                icon=\"delete\"\r\n                                @click.native=\"clickRowDeleteButton(row)\"\r\n                                v-if=\"canEdit\"\r\n                        ></el-button-mini>\r\n                    </template>\r\n                </table-panel>\r\n            </div>\r\n\r\n        </el-dialog>\r\n        <trans-move-add-dialog\r\n                :visible.sync=\"showAddDialog\"\r\n                :edit-id=\"editId\"\r\n                :type=\"type\"\r\n                :stock-trans=\"stockTrans\"\r\n                @finish=\"refreshData\"\r\n        ></trans-move-add-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import TablePanel from \"@/components/layout-component/TablePanel\";\r\n    import ElButtonMini from \"@/components/common/button/ElButtonMini\";\r\n    import Api from \"@/assets/api/Api\";\r\n    import ElButtonCurdGroup from \"@/components/common/button/ElButtonCurdGroup\";\r\n    import DialogUtil from \"@/util/DialogUtil\";\r\n    import MoveAddDialog from \"@/components/page-content/stock-entry/dialog/MoveAddDialog\";\r\n    import StockTransModel from \"@/project/model/StockTransModel\";\r\n    import TransMoveAddDialog from \"@/components/page-content/stock-trans/dialog/TransMoveAddDialog\";\r\n\r\n    export default {\r\n        name: \"TransMoveListDialog\",\r\n        components: {TransMoveAddDialog, MoveAddDialog, ElButtonCurdGroup, ElButtonMini, TablePanel},\r\n        props: {\r\n            visible: {\r\n                default: false\r\n            },\r\n            stockTrans: {\r\n                default() {\r\n                    return new StockTransModel();\r\n                }\r\n            },\r\n            type: {\r\n                default: 1\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                loading: false,\r\n                showAddDialog: false,\r\n                data: [],\r\n                selectedRow: [],\r\n                editId: 0,\r\n            }\r\n        },\r\n        mounted() {\r\n            this.reload();\r\n        },\r\n        methods: {\r\n            reload() {\r\n            },\r\n            showDialog(v) {\r\n                this.$emit(\"update:visible\", v);\r\n            },\r\n            refreshData() {\r\n                this.loading = true;\r\n                this.$ajax.request(Api.move.selectByStockTransId, {\r\n                    stockTransId: this.stockTrans.id\r\n                }).then(resp => {\r\n                    this.data = resp;\r\n                }).finally(() => this.loading = false)\r\n            },\r\n\r\n            clickAddButton() {\r\n                this.editId = 0;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickEditButton() {\r\n                this.editId = this.selectedRow[0].id;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickDeleteButton() {\r\n                this.delete(this.selectedRow);\r\n            },\r\n            clickRowEditButton(row) {\r\n                this.editId = row.id;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickRowDeleteButton(row) {\r\n                this.delete([row]);\r\n            },\r\n            delete(nodes) {\r\n                DialogUtil.confirm(`\r\n                    确定删除以下${this.typeText}信息吗？ <br>\r\n                    [ ${nodes.map(x => x.materialName).join(',')} ]\r\n                `).then(() => {\r\n                    return this.$ajax.request(Api.move.delete, {\r\n                        ids: nodes.map(x => x.id).join(',')\r\n                    });\r\n                }).then(resp => {\r\n                    DialogUtil.toastSuccess(resp);\r\n                    this.refreshData();\r\n                })\r\n            },\r\n            stockText(row, isTo = false) {\r\n                let k = isTo ? 'To' : '';\r\n                return [\r\n                    row['warehouseCode' + k],\r\n                    row['reservoirCode' + k],\r\n                    row['stockCode' + k] + `(${row['stockName' + k]})`\r\n                ].join(' / ');\r\n            },\r\n        },\r\n        watch: {\r\n            visible(v) {\r\n                if (v) {\r\n                    this.refreshData();\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n            title() {\r\n                return `${this.typeText}单明细 ${this.stockTrans.number}`\r\n            },\r\n            typeText() {\r\n                return \"移位\";\r\n            },\r\n            canEdit() {\r\n                return [1, 4].includes(this.stockTrans.status);\r\n            }\r\n        },\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import (reference) \"~style/all.less\";\r\n\r\n    .TransMoveListDialog {\r\n    }\r\n</style>"]}]}