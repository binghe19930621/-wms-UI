{"remainingRequest":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\stock-entry\\dialog\\StockEntryPreviewDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\stock-entry\\dialog\\StockEntryPreviewDialog.vue","mtime":1585370815974},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport PrintUtil from \"@/util/PrintUtil\";\nimport StockEntryModel from \"@/project/model/StockEntryModel\";\nimport Api from \"@/assets/api/Api\";\nimport ApproveEnum from \"@/project/enum/ApproveEnum\";\nimport ElButtonMini from \"@/components/common/button/ElButtonMini\";\n\nexport default {\n    name: \"StockEntryPreviewDialog\",\n    components: {ElButtonMini},\n    props: {\n        visible: {\n            default: false\n        },\n        type: {\n            default: 1,\n        },\n        editId: {\n            default: 0\n        }\n    },\n    data() {\n        return {\n            stockEntry: new StockEntryModel(),\n            moves: [],\n            loading: false,\n            statusEnum: ApproveEnum[this.type === 1 ? 'dictIn' : 'dictOut']\n        }\n    },\n    mounted() {\n        this.reload();\n    },\n    methods: {\n        reload() {\n        },\n        showDialog(v) {\n            this.$emit('update:visible', v);\n        },\n        refreshData() {\n            this.stockEntry = new StockEntryModel();\n            this.moves = [];\n            this.loading = true;\n            this.$ajax.request(Api.stockEntry.getById, {\n                id: this.editId\n            }).then(resp => {\n                this.stockEntry = resp;\n                return this.$ajax.request(Api.move.selectByStockEntryId, {\n                    stockEntryId: this.editId\n                });\n            }).then(resp => {\n                this.moves = resp;\n                this.setDoc();\n            }).finally(() => this.loading = false);\n        },\n        setDoc() {\n            this.$nextTick(() => {\n                PrintUtil.setDoc(this.$refs.infoBlock.innerHTML, this.$refs.iframe);\n            });\n        },\n        clickPrintButton() {\n            this.$nextTick(() => {\n                PrintUtil.print(this.$refs.iframe);\n            })\n        }\n    },\n    watch: {\n        visible(v) {\n            if (v) {\n                this.$nextTick(() => {\n                    this.refreshData();\n                })\n            }\n        },\n\n    },\n    computed: {\n        typeText() {\n            return this.type === 1 ? '入库' : '出库';\n        },\n        tdStyle() {\n            return {\n                'padding': '3pt 1pt'\n            }\n        }\n    },\n\n\n}\n",{"version":3,"sources":["StockEntryPreviewDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"StockEntryPreviewDialog.vue","sourceRoot":"src/components/page-content/stock-entry/dialog","sourcesContent":["<template>\r\n    <div class=\"StockEntryPreviewDialog\">\r\n        <el-dialog\r\n                :visible=\"visible\"\r\n                @update:visible=\"showDialog\"\r\n                :modal-append-to-body=\"true\"\r\n                width=\"1000px\"\r\n                custom-class=\"full-height-dialog\"\r\n                :append-to-body=\"true\"\r\n        >\r\n            <div class=\"flex-box flex-center\" slot=\"title\">\r\n                <div class=\"mr-md\">{{`${typeText}单预览 ${stockEntry.number}`}}</div>\r\n                <el-button-mini\r\n                        icon=\"iconfont icon-print\"\r\n                        @click.native=\"clickPrintButton\"\r\n                >打印\r\n                </el-button-mini>\r\n            </div>\r\n            <iframe style=\"width: 100%;border:none; height: 100%;\"\r\n                    ref=\"iframe\"\r\n            ></iframe>\r\n            <div class=\"\" v-show=\"false\" ref=\"infoBlock\">\r\n\r\n                <div class=\"\" style=\"\">\r\n                    <div class=\"\" style=\"font-size: 20pt;margin-bottom: 20pt;text-align: center;\">\r\n                        {{typeText}}单\r\n                    </div>\r\n                    <table style=\"border-collapse: collapse;text-align: center;font-size: 11pt;width: 100%;\"\r\n                           border=\"true\">\r\n                        <thead>\r\n                        <tr class=\"tr-iframe\">\r\n                            <th :style=\"tdStyle\">{{ typeText }}单号</th>\r\n                            <th :style=\"tdStyle\">订单号</th>\r\n                            <th :style=\"tdStyle\">公司编号</th>\r\n                            <th :style=\"tdStyle\">公司名称</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr class=\"tr-iframe\">\r\n                            <td :style=\"tdStyle\">{{stockEntry.number}}</td>\r\n                            <td :style=\"tdStyle\">{{stockEntry.orderNumber}}</td>\r\n                            <td :style=\"tdStyle\">{{stockEntry.companyCode}}</td>\r\n                            <td :style=\"tdStyle\">{{stockEntry.companyName}}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <div class=\"\" style=\"font-size: 12pt;text-align: center;margin: 4pt 0 2pt 0\">\r\n                        明细\r\n                    </div>\r\n                    <table style=\"border-collapse: collapse;text-align: center;font-size: 11pt;width: 100%;\"\r\n                           border=\"true\">\r\n                        <thead>\r\n                        <tr class=\"tr-iframe\">\r\n                            <th width=\"300\" :style=\"tdStyle\">物料编号</th>\r\n                            <th width=\"200\" :style=\"tdStyle\">物料名称</th>\r\n                            <th width=\"160\" :style=\"tdStyle\">计划数量</th>\r\n                            <th width=\"260\" :style=\"tdStyle\">实际数量</th>\r\n                            <th width=\"260\" :style=\"tdStyle\">货架编号</th>\r\n                            <th width=\"260\" :style=\"tdStyle\">货架名称</th>\r\n                            <th width=\"260\" :style=\"tdStyle\">状态</th>\r\n                            <th width=\"260\" :style=\"tdStyle\">审核人</th>\r\n                            <th width=\"260\" :style=\"tdStyle\">审核时间</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr class=\"tr-iframe\"\r\n                            v-for=\"(item, i) in moves\"\r\n                            :key=\"item.id\"\r\n                        >\r\n                            <td :style=\"tdStyle\">{{item.materialCode}}</td>\r\n                            <td :style=\"tdStyle\">{{item.materialName}}</td>\r\n                            <td :style=\"tdStyle\">{{item.planQuantity}}</td>\r\n                            <td :style=\"tdStyle\">{{item.quantity}}</td>\r\n                            <td :style=\"tdStyle\">{{item.stockCode}}</td>\r\n                            <td :style=\"tdStyle\">{{item.stockName}}</td>\r\n                            <td :style=\"tdStyle\">{{ statusEnum[item.status] }}</td>\r\n                            <td :style=\"tdStyle\">{{item.approveUserName }}</td>\r\n                            <td :style=\"tdStyle\">{{item.approveTime }}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import PrintUtil from \"@/util/PrintUtil\";\r\n    import StockEntryModel from \"@/project/model/StockEntryModel\";\r\n    import Api from \"@/assets/api/Api\";\r\n    import ApproveEnum from \"@/project/enum/ApproveEnum\";\r\n    import ElButtonMini from \"@/components/common/button/ElButtonMini\";\r\n\r\n    export default {\r\n        name: \"StockEntryPreviewDialog\",\r\n        components: {ElButtonMini},\r\n        props: {\r\n            visible: {\r\n                default: false\r\n            },\r\n            type: {\r\n                default: 1,\r\n            },\r\n            editId: {\r\n                default: 0\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                stockEntry: new StockEntryModel(),\r\n                moves: [],\r\n                loading: false,\r\n                statusEnum: ApproveEnum[this.type === 1 ? 'dictIn' : 'dictOut']\r\n            }\r\n        },\r\n        mounted() {\r\n            this.reload();\r\n        },\r\n        methods: {\r\n            reload() {\r\n            },\r\n            showDialog(v) {\r\n                this.$emit('update:visible', v);\r\n            },\r\n            refreshData() {\r\n                this.stockEntry = new StockEntryModel();\r\n                this.moves = [];\r\n                this.loading = true;\r\n                this.$ajax.request(Api.stockEntry.getById, {\r\n                    id: this.editId\r\n                }).then(resp => {\r\n                    this.stockEntry = resp;\r\n                    return this.$ajax.request(Api.move.selectByStockEntryId, {\r\n                        stockEntryId: this.editId\r\n                    });\r\n                }).then(resp => {\r\n                    this.moves = resp;\r\n                    this.setDoc();\r\n                }).finally(() => this.loading = false);\r\n            },\r\n            setDoc() {\r\n                this.$nextTick(() => {\r\n                    PrintUtil.setDoc(this.$refs.infoBlock.innerHTML, this.$refs.iframe);\r\n                });\r\n            },\r\n            clickPrintButton() {\r\n                this.$nextTick(() => {\r\n                    PrintUtil.print(this.$refs.iframe);\r\n                })\r\n            }\r\n        },\r\n        watch: {\r\n            visible(v) {\r\n                if (v) {\r\n                    this.$nextTick(() => {\r\n                        this.refreshData();\r\n                    })\r\n                }\r\n            },\r\n\r\n        },\r\n        computed: {\r\n            typeText() {\r\n                return this.type === 1 ? '入库' : '出库';\r\n            },\r\n            tdStyle() {\r\n                return {\r\n                    'padding': '3pt 1pt'\r\n                }\r\n            }\r\n        },\r\n\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import (reference) \"~style/all.less\";\r\n\r\n    .StockEntryPreviewDialog {\r\n    }\r\n</style>"]}]}