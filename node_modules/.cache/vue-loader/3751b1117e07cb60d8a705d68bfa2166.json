{"remainingRequest":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\stock-entry\\dialog\\MoveListDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\项目\\SKWMS\\wms-ui\\src\\components\\page-content\\stock-entry\\dialog\\MoveListDialog.vue","mtime":1585370815971},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\SKWMS\\wms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport TablePanel from \"@/components/layout-component/TablePanel\";\nimport ElButtonMini from \"@/components/common/button/ElButtonMini\";\nimport StockEntryModel from \"@/project/model/StockEntryModel\";\nimport Api from \"@/assets/api/Api\";\nimport ElButtonCurdGroup from \"@/components/common/button/ElButtonCurdGroup\";\nimport DialogUtil from \"@/util/DialogUtil\";\nimport MoveAddDialog from \"@/components/page-content/stock-entry/dialog/MoveAddDialog\";\n\nexport default {\n    name: \"MoveListDialog\",\n    components: {MoveAddDialog, ElButtonCurdGroup, ElButtonMini, TablePanel},\n    props: {\n        visible: {\n            default: false\n        },\n        stockEntry: {\n            default() {\n                return new StockEntryModel();\n            }\n        },\n        type: {\n            default: 1\n        }\n    },\n    data() {\n        return {\n            loading: false,\n            showAddDialog: false,\n            data: [],\n            selectedRow: [],\n            editId: 0,\n        }\n    },\n    mounted() {\n        this.reload();\n    },\n    methods: {\n        reload() {\n        },\n        showDialog(v) {\n            this.$emit(\"update:visible\", v);\n        },\n        refreshData() {\n            this.loading = true;\n            this.$ajax.request(Api.move.selectByStockEntryId, {\n                stockEntryId: this.stockEntry.id\n            }).then(resp => {\n                this.data = resp;\n            }).finally(() => this.loading = false)\n        },\n\n        clickAddButton() {\n            this.editId = 0;\n            this.showAddDialog = true;\n        },\n        clickEditButton() {\n            this.editId = this.selectedRow[0].id;\n            this.showAddDialog = true;\n        },\n        clickDeleteButton() {\n            this.delete(this.selectedRow);\n        },\n        clickRowEditButton(row) {\n            this.editId = row.id;\n            this.showAddDialog = true;\n        },\n        clickRowDeleteButton(row) {\n            this.delete([row]);\n        },\n        delete(nodes) {\n            DialogUtil.confirm(`\n                确定删除以下${this.typeText}信息吗？ <br>\n                [ ${nodes.map(x => x.materialName).join(',')} ]\n            `).then(() => {\n                return this.$ajax.request(Api.move.delete, {\n                    ids: nodes.map(x => x.id).join(',')\n                });\n            }).then(resp => {\n                DialogUtil.toastSuccess(resp);\n                this.refreshData();\n            })\n        },\n    },\n    watch: {\n        visible(v) {\n            if (v) {\n                this.refreshData();\n            }\n        }\n    },\n    computed: {\n        title() {\n            return `${this.typeText}单明细 ${this.stockEntry.number}`\n        },\n        typeText() {\n            return this.type === 1 ? '入库' : '出库';\n        },\n        canEdit() {\n            return [1, 4].includes(this.stockEntry.status);\n        }\n    },\n\n}\n",{"version":3,"sources":["MoveListDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"MoveListDialog.vue","sourceRoot":"src/components/page-content/stock-entry/dialog","sourcesContent":["<template>\r\n    <div class=\"MoveListDialog\">\r\n        <el-dialog\r\n                width=\"1000px\"\r\n                :visible=\"visible\"\r\n                @update:visible=\"showDialog\"\r\n                :title=\"title\"\r\n                @closed=\"$emit('close')\"\r\n        >\r\n            <div class=\"mb-xs fz-xs title-text-block\">\r\n                <span>{{ typeText }}单号：{{ stockEntry.number }}</span>\r\n                <span>订单号：{{ stockEntry.number }}</span>\r\n                <span>{{ typeText }}类型：{{ stockEntry.categoryName }}</span>\r\n                <span>公司名称：{{ stockEntry.companyName }}</span>\r\n            </div>\r\n            <div class=\"mb-xs\">\r\n                <el-button-curd-group\r\n                        slot=\"buttons\"\r\n                        :add-disabled=\"!canEdit\"\r\n                        :delete-disabled=\"!selectedRow.length || !canEdit\"\r\n                        :edit-disabled=\"selectedRow.length !== 1 || !canEdit\"\r\n                        @click-add=\"clickAddButton\"\r\n                        @click-edit=\"clickEditButton\"\r\n                        @click-delete=\"clickDeleteButton\"\r\n                ></el-button-curd-group>\r\n            </div>\r\n            <div class=\"\">\r\n                <table-panel\r\n                        :loading=\"loading\"\r\n                        :data=\"data\"\r\n                        operate-width=\"80\"\r\n                        :selectedRow.sync=\"selectedRow\"\r\n                        :create-user-show=\"true\"\r\n                        :update-user-show=\"true\"\r\n                        :show-all-warehouse=\"true\"\r\n                        :show-paginate=\"false\"\r\n                        :fix-height=\"360\"\r\n                        :sortable=\"null\"\r\n                        :show-index=\"false\"\r\n                        ref=\"table\"\r\n                >\r\n                    <el-table-column\r\n                            prop=\"materialName\"\r\n                            label=\"物品名称\"\r\n                            width=\"160\"\r\n                    ></el-table-column>\r\n\r\n                    <el-table-column\r\n                            prop=\"planQuantity\"\r\n                            label=\"计划数量\"\r\n                            width=\"100\"\r\n                    ></el-table-column>\r\n\r\n                    <el-table-column\r\n                            prop=\"quantity\"\r\n                            label=\"实际数量\"\r\n                            width=\"100\"\r\n                    ></el-table-column>\r\n\r\n                    <el-table-column\r\n                            prop=\"materialUnitName\"\r\n                            label=\"单位\"\r\n                            width=\"70\"\r\n                    ></el-table-column>\r\n\r\n                    <template slot=\"operate\" slot-scope=\"{row}\">\r\n                        <el-button-mini\r\n                                type=\"text\"\r\n                                icon=\"edit\"\r\n                                @click.native=\"clickRowEditButton(row)\"\r\n                                v-if=\"canEdit\"\r\n                        ></el-button-mini>\r\n                        <el-button-mini\r\n                                type=\"text\"\r\n                                icon=\"delete\"\r\n                                @click.native=\"clickRowDeleteButton(row)\"\r\n                                v-if=\"canEdit\"\r\n                        ></el-button-mini>\r\n                    </template>\r\n                </table-panel>\r\n            </div>\r\n\r\n        </el-dialog>\r\n        <move-add-dialog\r\n                :visible.sync=\"showAddDialog\"\r\n                :edit-id=\"editId\"\r\n                :type=\"type\"\r\n                :stock-entry=\"stockEntry\"\r\n                @finish=\"refreshData\"\r\n        ></move-add-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import TablePanel from \"@/components/layout-component/TablePanel\";\r\n    import ElButtonMini from \"@/components/common/button/ElButtonMini\";\r\n    import StockEntryModel from \"@/project/model/StockEntryModel\";\r\n    import Api from \"@/assets/api/Api\";\r\n    import ElButtonCurdGroup from \"@/components/common/button/ElButtonCurdGroup\";\r\n    import DialogUtil from \"@/util/DialogUtil\";\r\n    import MoveAddDialog from \"@/components/page-content/stock-entry/dialog/MoveAddDialog\";\r\n\r\n    export default {\r\n        name: \"MoveListDialog\",\r\n        components: {MoveAddDialog, ElButtonCurdGroup, ElButtonMini, TablePanel},\r\n        props: {\r\n            visible: {\r\n                default: false\r\n            },\r\n            stockEntry: {\r\n                default() {\r\n                    return new StockEntryModel();\r\n                }\r\n            },\r\n            type: {\r\n                default: 1\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                loading: false,\r\n                showAddDialog: false,\r\n                data: [],\r\n                selectedRow: [],\r\n                editId: 0,\r\n            }\r\n        },\r\n        mounted() {\r\n            this.reload();\r\n        },\r\n        methods: {\r\n            reload() {\r\n            },\r\n            showDialog(v) {\r\n                this.$emit(\"update:visible\", v);\r\n            },\r\n            refreshData() {\r\n                this.loading = true;\r\n                this.$ajax.request(Api.move.selectByStockEntryId, {\r\n                    stockEntryId: this.stockEntry.id\r\n                }).then(resp => {\r\n                    this.data = resp;\r\n                }).finally(() => this.loading = false)\r\n            },\r\n\r\n            clickAddButton() {\r\n                this.editId = 0;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickEditButton() {\r\n                this.editId = this.selectedRow[0].id;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickDeleteButton() {\r\n                this.delete(this.selectedRow);\r\n            },\r\n            clickRowEditButton(row) {\r\n                this.editId = row.id;\r\n                this.showAddDialog = true;\r\n            },\r\n            clickRowDeleteButton(row) {\r\n                this.delete([row]);\r\n            },\r\n            delete(nodes) {\r\n                DialogUtil.confirm(`\r\n                    确定删除以下${this.typeText}信息吗？ <br>\r\n                    [ ${nodes.map(x => x.materialName).join(',')} ]\r\n                `).then(() => {\r\n                    return this.$ajax.request(Api.move.delete, {\r\n                        ids: nodes.map(x => x.id).join(',')\r\n                    });\r\n                }).then(resp => {\r\n                    DialogUtil.toastSuccess(resp);\r\n                    this.refreshData();\r\n                })\r\n            },\r\n        },\r\n        watch: {\r\n            visible(v) {\r\n                if (v) {\r\n                    this.refreshData();\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n            title() {\r\n                return `${this.typeText}单明细 ${this.stockEntry.number}`\r\n            },\r\n            typeText() {\r\n                return this.type === 1 ? '入库' : '出库';\r\n            },\r\n            canEdit() {\r\n                return [1, 4].includes(this.stockEntry.status);\r\n            }\r\n        },\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import (reference) \"~style/all.less\";\r\n\r\n    .MoveListDialog {\r\n    }\r\n</style>"]}]}